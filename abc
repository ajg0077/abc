















<!DOCTYPE html>





<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="shortcut icon" href="/ddfs/images/logo-ddfs-favicon.png" type="image/png">
		<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
		<title></title>
		

        	
	
	
		 <link rel="stylesheet" href="/ddfs/css/bootstrap/bootstrap.min.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/ddfs/css/bootstrap/main-style.css" type="text/css" media="screen" />
	
	<link rel="stylesheet" href="/ddfs/css/font-awesome.min.css" type="text/css" media="screen" />
	
	<link type="text/css" href="/ddfs/css/custom/jquery-ui.min.css" rel="stylesheet" />	
	<link type="text/css" href="/ddfs/css/data_table_jui-min.css" rel="stylesheet" />
	<link type="text/css" href="/ddfs/css/chosen/chosen.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="/ddfs/css/master-min.css" type="text/css" media="screen" />
	<link type="text/css" href="/ddfs/css/jquery-tagsinput.css" rel="stylesheet" />
	<link type="text/css" href="/ddfs/css/menubar-min.css" rel="stylesheet"/>
	
	<link type="text/css" href="/ddfs/css/fileview-annotation.css" rel="stylesheet"/>

	<link rel="stylesheet" type="text/css" href="/ddfs/scripts/EasyTree/skin-win8/ui.easytree.css"/>
	<link type="text/css" href="/ddfs/css/jquery.eeyellow.Timeline.css" rel="stylesheet" />
	
	
	
	<link type="text/css" href="/ddfs/css/jquery.dialogr.css" rel="stylesheet" />
	<link type="text/css" href="/ddfs/css/layout-default-1.4.3.css" rel="stylesheet" /> 
	
	 <link type="text/css" href="/ddfs/scripts/dataTable_1.10/jquery.dataTables.min.css" rel="stylesheet" />
 	<link type="text/css" href="/ddfs/scripts/dataTable_1.10/responsive.dataTables.min.css" rel="stylesheet" />
		<link type="text/css" href="/ddfs/css/custom-styles.css" rel="stylesheet" />
	
	<script type="text/javascript" src="/ddfs/scripts/dataTable_1.10/jquery-1.12.3.js"></script>

	<script type="text/javascript" src="/ddfs/scripts/jquery-migrate-1.2.1.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/jquery.cookie.js"></script>
    <script type="text/javascript" src="/ddfs/scripts/jquery-ui-1.11.1.min.js"></script>
		<script type="text/javascript" src="/ddfs/scripts/bootstrap/bootstrap.min.js"></script>
		<script> 
			var btn=$.fn.button.noConflict();
			$.fn.btn=btn;
		</script>
		    
	<script type="text/javascript" src="/ddfs/scripts/jquery.relatedselects.min.js"></script>
	
	
	<script type="text/javascript" src="/ddfs/scripts/dataTable_1.10/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/dataTable_1.10/dataTables.responsive.min.js"></script>
	
	
	<script type="text/javascript" src="/ddfs/scripts/jquery.timers-1.2.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/jquery.form-min.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/jquery.jstree.js"></script>
	<script type="text/javascript" src="/ddfs/ckeditor_4.1.1/ckeditor.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/jquery-tagsinput-min.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/master.js?ver=4.5.2"></script>
	<script type="text/javascript" src="/ddfs/scripts/meeting.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/jquery.jeditable.js"></script>
    <script type="text/javascript" src="/ddfs/scripts/jquery.dataTables.editable.js"></script>
	<script type="text/javascript" src="/ddfs/scripts/chosen/chosen.jquery.min.js"></script>
    <script type="text/javascript" src="/ddfs/scripts/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="/ddfs/scripts/jquery.balloon.min.js"></script>

    <script type="text/javascript" src="/ddfs/scripts/ui.dialogr.js"></script>

    <script type="text/javascript" src="/ddfs/viewer/js/viewer-annotate.js"></script>
    <script type="text/javascript" src="/ddfs/scripts/jquery.layout-1.4.3.js"></script>
    <script type="text/javascript" src="/ddfs/scripts/EasyTree/jquery.easytree.js"></script>

 <script type="text/javascript" src="/ddfs/scripts/jquery.eeyellow.Timeline.js"></script>
 <script type="text/javascript" src="/ddfs/scripts/pagination/jquery.twbsPagination.min.js"></script>
     <script type="text/javascript" src="/ddfs/scripts/scrollbar.js"></script>
 

    <script>
    $(document).everyTime(1000,"autoChildrenClose",function(){
		if(true!==window.parentWindowAvailable()){
			self.close();
		}
	});		
	var timeOut=false;
	$(document).everyTime(120000,"sessionCheck",function(){
		if(false===timeOut){
			$.ajax({
				error:function(jqXHR, textStatus, errorThrown) {
					$("body").empty().load('/ddfs/sessionExpired.html');
					timeOut=true;
				},
				dataType:'json',
				url:"/ddfs/common/sessionCheck.do?poll=true",
				success:function(data, textStatus, jqXHR){
					//do something
				}
			});
		}
	});
		
	</script>
	
	<!--[if lte IE 8]>
		<script>
			if(screen.width <= 1024){
				$('head').append('<link rel="stylesheet" href="/ddfs/css/ie8.css" type="text/css" media="screen" />');
			}
		</script>
	<![endif]-->
	


        













		















<div id="translitration" title="Malayalam" style="display:none">
			<iframe frameborder="0" id="languageFrame" width="625px" height="100%" style="border:none; float:left;">
					  <p>Your browser does not support iframes.</p>
			</iframe>
</div>
		<script type="text/javascript">
			var editorId = "";
			$(document).ready(function() {
				$.ajaxSetup({
					cache: false,
				    beforeSend: function (xhr)
				    {
				       xhr.setRequestHeader("Authorization",'null');        
				    }
				});
				$(document).everyTime(100, 'autoclose', function(i) {
					if (null != window.opener) {
						if(typeof( window.opener!=null ) ) {
							if( window.opener.closed ) {
								window.close();
							}
						}
					} else {
						var session = '';
						if('EMAIL' != session ){
							window.close();
						}
					}
				});

				
				
				initializeOnClickCalendar('03.04.2019');
				styleSubmitButtons();
				handleSessionTimeoutScreen();
				initializeSpinner();

				// Intercepts all links with name 'deleteEntity' and show a confirmation dialog 
				// defined by the div with id 'dialog'. On confirmation, a GET request is send and 
				// the tab panel is loaded with the target.
				$('#componentview').off('click', "a[name^='deleteEntity']").on('click', "a[name^='deleteEntity']", function(e) {	
					e.preventDefault();
					return displayDeleteDialog(this, $('#componentview'));
				  });

				$('#componentview').off('click', "input[name^='confirmEntity']").on('click', "input[name^='confirmEntity']", function(e) {
					e.preventDefault();
					return displayDeleteDialog(this, $('#componentview'));
				  });

				$('#componentview').off('click', "a[name^='addAttachment']").on('click', "a[name^='addAttachment']", function(e) {	
					e.preventDefault();
					var $form = $(this).closest('form');
					return displayAttachmentDialog();
				  });	
				 
				$('#componentview').off('click', "a[name^='addAnnexureAttachment']").on('click', "a[name^='addAnnexureAttachment']", function(e) {
					e.preventDefault();
					var $form = $(this).closest('form');
					return displayAnnexureAttachmentDialog();
				  });

				$('#componentview').off('click', "a[name^='addDraftAttachment']").on('click', "a[name^='addDraftAttachment']", function(e) {
					e.preventDefault();
					var $form = $(this).closest('form');
					return displayDraftAttachmentDialog();
				  });

				  
				$('#componentview').off('click', "a[name^='sacnAttachment']").on('click', "a[name^='sacnAttachment']", function(e) {
					e.preventDefault();
					return displayScanAttachmentDialog();
				  });
				$('#componentview').off('click', "span[class^='ddfs-seat-info']",function()
				{
					 showUserDetails(this);
				});
			
				// Intercepts all links which do not have names as 'deleteEntity' and load the contents
				// of the tab panel with the target using a GET request.
				$('#componentview').off('click', 
						"a[name!='deleteEntity'][name!='nonAjaxLink'][name!='addAttachment'][name!='addAnnexureAttachment'][name!='addDraftAttachment'][name!='sacnAttachment'][name!='openInNewWindow'][id!='openInNewWindow']")
						.on('click', 
						"a[name!='deleteEntity'][name!='nonAjaxLink'][name!='addAttachment'][name!='addAnnexureAttachment'][name!='addDraftAttachment'][name!='sacnAttachment'][name!='openInNewWindow'][id!='openInNewWindow']", 
						function(e) {
							e.preventDefault();
							if(!(
									(null != $(this).attr("id") && $(this).attr("id").indexOf("cke") != -1)
									|| $(this).parents().hasClass('cke')
								)) {
								if(!$(this).hasClass('fg-button')) {
									return handleLinkClick(this, $('#componentview'));
								}
							}
						}
				);

				var uploadAttachmentOptions = {
						dataType: 'json',
						beforeSubmit: function(formdata, form, options){
						},
						success:  function(response){
							if (!response.ERROR){
								var data = response.DATA;
								openPopUpWindow(data);
							} else{
								openPopUpWindow('Upload Failed - '+response.ERROR_MSG);
							}
						}
				}; 


				// Intercepts all form submissions - to make it happen inside the tab panel
				$('#componentview').off('submit', 'form[name!="uploadAjaxForm"][name!="nonAjaxForm"][id!="nonAjaxForm"][id!="noteEditor"]')
						.on('submit', 'form[name!="uploadAjaxForm"][name!="nonAjaxForm"][id!="nonAjaxForm"][id!="noteEditor"]', 
					function(e) {
							e.preventDefault();
							handleFormSubmission(this, $('#componentview'));	
							return false;
					});
						 
				// This is for the department selector dropdown, which colud be placed in multiple pages.
				// Dropdown should be placed only one per page.
				$('#componentview').off('change', "select[id='deptSelector']").on('change', "select[id='deptSelector']", 
						function(e) {
							e.preventDefault();
							return handleDepartmentChange($('#componentview'));
						}
				);

				/*
				$('#componentview').intercept('click', "input[class^='datepickericon']", 
						function() { 
							initializeOnClickCalendar($('#componentview'));
						}
				);
				*/

				// To partial submit the form containing the dropdown.For example, if you have two dropdowns
				// in the page for department and users (in the department), you need to show the
				// users dropdown based on the value selected for the department.
				$('#componentview').off('change', "select[id^='partialSubmit']").on('change', "select[id^='partialSubmit']", 
						function(e) {
							e.preventDefault();
							return partialSubmit($(this), $('#componentview'));
						});
				$('#componentview').off('change', "select[name^='partialSubmit']").on('change', "select[name^='partialSubmit']",  
						function(e) {
							e.preventDefault();
							return partialSubmit($(this), $('#componentview'));
						});

				//Reset button
				$('#componentview').off('click', "input[id^='resetBtn']").on('click', "input[id^='resetBtn']",  
						function(e) {
							e.preventDefault();
							return resetForm($(this));
						});


				$('#componentview').off('click', "span[id^='toggler']").on('click', "span[id^='toggler']", 
						function(e){
							e.preventDefault();
							return toggle($(this));
				 		}
		 		);		

				$('body').off('click', "span[id^='advFilterBtn']").on('click', "span[id^='advFilterBtn']", function(e) {
					e.preventDefault();
					if ($("span[id^='advFilterBtn']").html() == 'Off') {
						$("div[id^='advFilterBox']").show();
						$("span[id^='advFilterBtn']").html("On");
					} else {
						$("div[id^='advFilterBox']").hide();
						$("span[id^='advFilterBtn']").html("Off");
					}
				});

				showEditor();

				$(document).bind("mousemove",function(e){
					e.preventDefault();
					if (window.opener && window.opener.resetMouseMoveCounter) {
						window.opener.resetMouseMoveCounter();
					}
				});
					
			});

			function getCurrentDate(){
				return '03042019';
			}

			function getContextPath(){
				return "/ddfs";
			}
			
			function showCkEditorContent(editor){
				var editor_id = editor.container.getAttribute("id");
				editorId = editor_id.replace("cke_","");
				var $translitration = $("#translitration").dialog({
					autoOpen: false,
					resizable: true,
					height:400,
					width:650,
					overlay: {
						backgroundColor: '#000',
						opacity: 1
					}
				});
				$('#languageFrame').attr("src", getContextPath()+"/lang.jsp");
				$("#translitration").dialog('open');
			}
			function abc(data){
				 CKEDITOR.instances[editorId].insertHtml(data);
				 $("#translitration").dialog('close');
			}
			function cancelAdd(){
				$("#translitration").dialog('close');
			}
		</script>
		
		
		<script type="text/javascript" src="/ddfs/scripts/jixedbar-0.0.5/jquery.jixedbar.js"></script>
		<style type="text/css">
		#cnvsLablTxtArea{
			resize : none;
			background : transparent;
		}
		#canvas{

			cursor : url("/ddfs/images/highlightMarkerTool.png"), progress;
		}
		#canvasToolBox{
			position: fixed;
			width: 16%;
			margin-left: 524px;
		}
		#canvasToolBox img {
			border: 1px solid;
			border-radius: 4px;
			margin-left: 7px;
			padding: 4px;
			}
		.no-close .ui-dialog-titlebar-close {display: none }
		html {height: auto!important;}
		#layout{background-color:#fff;}
			body{ background-color: #E5E5E5 !important;min-width: auto !important; width: 100%;}

		</style>
		<script type="text/javascript">
		    $(document).ready(function() {
				$("#actionbar").jixedbar({
					    transparent: false,
					    opacity: 0.9,
					    slideSpeed: "fast",
					    roundedCorners: false,
					    roundedButtons: false,
					    menuFadeSpeed: "fast",
					    tooltipFadeSpeed: "slow",
					    tooltipFadeOpacity: 1.0
				});

				$(window).bind("mousemove",function(){
					//window.opener.mouseMove = 0;
				});
				$(window).unload(function() {
					//unlockAndCloseFile('4aa7ffa7-f153-4847-8bb2-bdd8107adae6');
				});
		    });

		 
		    function showPdfImage(url,annotaionId){
				var path=annotaionId.split("|");
				var pageNo=path[3];
				var fileNo= path[2];
				var areaId=path[1];
				path=path[0];
				var html='<div id="viewPdfImageDialog" title="Annotation" style="display:none">'+
							'<div class="page" style="position: relative; float: left; width: 57%;"><img alt="" id="imgId" style="width:100%;height:auto;" src="'+url+'" /></div>'+
							'<div id="commentsId" class="annot-div-comm"></div>'+
						'</div>';
				var url1 = /ddfs/+"annotation/getAnnotation.do?action=getAnnotationComments&note=1&annotationPath="+annotaionId;
				$.ajax({
					url : url1,
					 success: function(response){
						$("#commentsId").html(response);
					}

				});

				var $addRefDialog = $(html).dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:530,
					width:850,
					modal: true,
					zIndex: 1000,
					close:function(){
						try {
							 $(this).dialog('destroy').remove();
						} catch (e) {
							// TODO: handle exception
						}
					},
					open: function( event, ui ) {
						setTimeout(function(){annotateImage(path,pageNo,areaId,fileNo);},1000);
					}


				});
				$addRefDialog.dialog('option', 'buttons',
						{
							 'Cancel': function() {
								 try {
									 $(this).dialog('destroy').remove();
								} catch (e) {
									// TODO: handle exception
								}

								return false;
							 }
						});
				$addRefDialog.dialog('open');

				$("#image-annotate-add").hide();
				return false;
			}
		    function annotateImage(path,pageNo,areaId,fileNo){
				var annotatedImage =$("#imgId").annotateImage({
					getUrl:'/ddfs/annotation/viewAnnotation.do?action=getAnnotations&path=' + path + '&pageNo=' + pageNo+'&area='+areaId+'&fileNo='+fileNo,
					editable: true,
					highlightOn: true,
					imageHeight:$("#imgId").height(),
					imageWidth:$("#imgId").width(),
				});
		    }





		    /* $(document).ready(function() {
		   	 draftFrameResize();
		   	 noteFrameResize();
		   	 $(window).resize(function() {
		   		 draftFrameResize();
		   		 noteFrameResize();
		   	 });
		   });
		   function  draftFrameResize() {
		       $height = $(window).height() -140;
		       $('.draft-odt-frame').height($height);
		   }

		   function  noteFrameResize() {
		   	alert(height);
		       $height = $(window).height() -102;
		       $('#notesFrame').height($height);
		   } */


		  /*  $(document).ready(function() {
				switchViewTabsArea();
				resizeFileViewIframe();
			  $(window).resize(function() {
				  switchViewTabsArea();
				  resizeFileViewIframe();
				});

			});

			 function resizeFileViewIframe() {
				 alert(height);
			    $height = $(window).height() -102;
			    $('#notesFrame').height($height);
			}
			   function switchViewTabsArea() {
			    $height = $(window).height() -140;
			    $('#currentsIFrame').height($height);
			}  */


		</script>

		<!--
		<script type="text/javascript" src="/ddfs/scripts/ADxMenu.js"></script>
		-->

	</head>

	<body style="height: auto;">

		
		
		
			
		


 		<div id="layout"  >
			




















	<script type="text/javascript">
	
	 $(document).ready(function(){
		  $('#linkedPopover').click(function (e) {
			  e.stopPropagation();
			 	$('.linked-popover').toggle();
			});
		
		  $(".lockSelect").mouseleave(function(e){
				 $(".lockSelect").hide();  
		  
	 	 });
		});
	 $(document).click(function(e){
			var targetbox = $('.merged-popover');
			if(!targetbox.is(e.target) && targetbox.has(e.target).length === 0){
			    $('.merged-popover').hide();
			}
		});
	 $(document).click(function(e){
			var targetbox = $('.linked-popover');
			if(!targetbox.is(e.target) && targetbox.has(e.target).length === 0){
			    $('.linked-popover').hide();
			}
		});
	
	
		var notesFrameSrc;
		$(document).ready(function( $ ){
			notesFrameSrc=$("#notesFrame").attr("src");
			
			$("a.jump").off("click").on("click",function(){
				if($("#notesFrame").length==1){
					$("#notesFrame").contents().find("#togglerNoteEditorBox").css("display", "block");
					$("#notesFrame").contents().find("#togglerNoteEditor").html('Hide Note Editor');
				 	$("#notesFrame").attr("src",notesFrameSrc+"#togglerNoteEditorBox");
			 	}else{
			 		$("#togglerNoteEditorBox").css("display", "block");
		    		$("#togglerNoteEditor").html('Hide Note Editor');
				 	window.location.href="#togglerNoteEditorBox";
				}
			});
			$('#tags').tagsInput({
				   'height':'100px',
				   'width':'97%',
				   'interactive':true,
				   'defaultText':'add a tag',
				   'removeWithBackspace' : true,
				   'minChars' : 0,
				   'maxChars' : 0, //if not provided there is no limit,
				   'placeholderColor' : '#666666',
				   'onAddTag' : function(tag) {
					   $.post('/ddfs/files/updateTag.do',
							   [{ name: 'fileNo', value: '4aa7ffa7-f153-4847-8bb2-bdd8107adae6'} ,{ name: 'tags', value: $('#tags').val()}],
							   function(data) {});},
				   'onRemoveTag' : function(tag) {
					   $.post('/ddfs/files/updateTag.do',
							   [{ name: 'fileNo', value: '4aa7ffa7-f153-4847-8bb2-bdd8107adae6'} ,{ name: 'tags', value: $('#tags').val()}],
							   function(data) {});
				   }
			});
		});
		
		
		 $(document).click(function(e){
			var targetbox = $('.icon-link');
			if(!targetbox.is(e.target) && targetbox.has(e.target).length === 0){
			    $('.lockSelect').hide();
			}
			}); 


		function fileUnlock() {
			$(".lockSelect").toggle();
		}
		function lockFile(fileNo,ob){
			$.post("lockFile.do",{action:"lockFile","fileNo":fileNo,tempOperation:false,excludeBookmark:false,fromQueue:''},function(data){
				location.reload();
				/*After lock  workQueue table refresh*/
				if (window.opener && window.opener.refreshData) {
					if(!window.opener.closed) {
						window.opener.refreshData();
					 }
				}
			});
		}
		function unlockFile(fileNo,ob){
			$.post("lockFile.do",{action:"unlockFile","fileNo":fileNo,tempOperation:false,excludeBookmark:false,fromQueue:''},function(data){
				if (data != "" && data != "0") {
					
						openConfirmationDialog(fileNo,data);
					
					
				} else {
					location.replace(location.href.replace("&autolock=true",""));
					//location.reload();
				}
				
				/*After  unlock workQueue table refresh*/
				if (window.opener && window.opener.refreshData) {
					if(!window.opener.closed) {
						window.opener.refreshData();
					 }
				}
			});
		}
		
		function unlockAndCloseFile(fileNo){
			if ("true" == ''){
			 $.post("lockFile.do",{action:"unlockFile","fileNo":fileNo,tempOperation:false,excludeBookmark:false,fromQueue:''},function(data){
				 if (window.opener && window.opener.refreshData) {
					if(!window.opener.closed) {
						window.opener.refreshData();
					 }
					 setTimeout(function(){
						window.close();
						window.opener.focus();
					 }, 100)
				 }
			 });
			} else {
				window.close();
				window.opener.focus();
			}
		 }
		
	function openConfirmationDialog (fileNo,msg) {
		var $msgCommonDialog = $('<div id="ConfirmationDialog"><span class="popup-info">'+msg+'</span></div>').dialog({
			autoOpen: false,
			bgiframe: true,
			resizable: false,
			height : 'auto',
			width:600,
			modal: true,
			title: 'Alert',
			overlay: {
				backgroundColor: '#000',
				opacity: 0.1
			},
			closeOnEscape: false,
			close: function(){
				$msgCommonDialog.dialog("destroy").remove();
			}
		});

		$msgCommonDialog.dialog('option', 'buttons',
				{
					 'Ok': function() {
						 $.post("lockFile.do",{action:"unlockAttachmentsInFile","attachmentAction":"Unlock","fileNo":fileNo,tempOperation:false,excludeBookmark:false},function(data){
							 location.reload();
						 });
						$(this).dialog('close');
						
					 },
	         	   'Cancel' : function() {
	         		  $(this).dialog('close');
	         		  location.reload();
	         	   }
				});
		$msgCommonDialog.dialog('open');
		return false;
	}

		$(document).ready(function() {
			fileViewNavbarResize();
			resizeFileMenu();
			resizeAddAttachement();
			$(window).resize(function() {
			 fileViewNavbarResize();
			 resizeFileMenu();
			 resizeAddAttachement();
		});
			 $("#docViewId").click(function(){
			 $(".mega-dropdown-menu").toggle();	
			 });
			 $(".missDocDiv").mouseleave(function(e){
			 $(".missDocDiv").hide();  
	 	 });
	});
		 $(document).click(function(e){
				var targetbox = $('#docViewId');
				if(!targetbox.is(e.target) && targetbox.has(e.target).length === 0){
				    $('.missDocDiv').hide();
				}
			});
	/*submenu-start*/
	function fileMenuNav(){
			$(".fileView-navbar-collapse").addClass("fileViewSubMenu");
			$(".fileView-navbar-collapse").find("#navi").removeClass("fileViewMenu");
			$('.fileView-navbar-collapse').slideToggle(300, function() {
		    $('.fileView-navbar-collapse').toggleClass('fileViewSubMenu', $(this).is(':visible'));

	  });
	}

	 function fileViewNavbarResize() {

		 if($(window).width() >= 1025){
			 $(".fileView-navbar-collapse").removeClass("fileViewSubMenu");
			 $("#navi").addClass("fileViewMenu");
			 $("#actionbar").removeClass("fileViewActionbar");
			 $(".navbar-header").css("width", 'auto');
			 $(".fileView-navbar-collapse").css("height", 'auto');
			 $(".fileView-navbar-collapse").css("display", 'block');
			}
			else {
			$(".fileView-navbar-collapse").css("display", 'none');
			$("#actionbar").addClass("fileViewActionbar");
			$(".fileView-navbar-collapse").addClass("fileViewSubMenu");
			$("#navi").removeClass("fileViewMenu");
			$(".fileView-navbar-collapse").addClass("fileViewSubMenu");
			 $(".navbar-header").css("width", '100%');
			}
		}


	 function  resizeFileMenu() {
		    $height = $(window).height() -142;
		    $('.fileViewSubMenu').height($height);
		}

	 function  resizeAddAttachement() {
		    $height = $(window).height() -142;
		    $('.doc-attach-div').height($height);
		}
	 $('.dropdown-menu').click(function(e) {
		    e.stopPropagation();
		});
	 function getMissingDocuments(fileNo){
		 $.ajax({
	 			 type:"GET",
				url : "getMissingDocuments.do?fileNo="+fileNo,
				 success: function(response){
					 $("#missingDocDivId").html(response);
				}

			});
	 }
	 function openActionItemsPopUp(fileNo){
			$actionItemsDialog = $("<div id='actionItemsDialog'></div>").dialog({
				autoOpen: false,
				bgiframe: true,
				resizable: false,
				height:600,
				width:1200,
				modal: true,
				title: "Action Items",
				overlay: {
					backgroundColor: '#000',
					opacity: 0
				},
				close: function (){
					 $actionItemsDialog.dialog("destroy").remove();
				}
			});
			$actionItemsDialog.dialog('option', 'buttons',
			{
			 'Close': function() {
				 $actionItemsDialog.dialog("destroy").remove();
			 	},

			});

			$actionItemsDialog.dialog('open');
			$("#actionItemsDialog").load('/ddfs/files/addFileDueDate.do?_decoration=true&action=viewActionItems&fileNo='+fileNo);
			return false;
	 }
	 function closeEditor(){
			$("#onlyofficeFrame").attr("src","");
			$("#onlyofficeFrame").hide();
			$("#actionbar").show();
			$(".editCloseBtn").hide();
			window.location.reload(true);
			 
	 }
	 $(document).mouseup(function (e)
			 {
			     var container = $(".missDocDiv");
			     if (!container.is(e.target) // if the target of the click isn't the container...
			         && container.has(e.target).length === 0) // ... nor a descendant of the container
			     {
			         container.hide();
			     }
			 });
	</script>
<style>
.main-heading {padding: 0 5px!important;}
.tab-contents-general  { margin-top: 67px;}
#notesViewFrame   { margin-top: 67px;}
#switchViewTabs  { margin-top: 67px;}
.fg-toolbar { border: medium none !important;  font-size: 1em;}
.action-link {margin: 0px!important;}
#chitDialog > a#closeBtn {
    background-color: #00aaa0;
    border-radius: 50%;
    color: #fff;
    font-weight: bold;
    padding: 1px 6px;
    position: absolute;
    right: 2px;
    text-align: center;
    top: 2px;
    vertical-align: middle;
    z-index: 1000;}
#chitDialog > a#closeBtn:hover {cursor: pointer;background-color: #F3A434!important;}

.lockSelect:after, .lockSelect:before {
	bottom: 100%;
	left: 48px;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}
.lockSelect:after {
	border-color: rgba(136, 183, 213, 0);
	border-bottom-color: #F8F8F8;
	border-width: 9px;
	margin-left: -36px;
}
.lockSelect:before {
	border-color: rgba(194, 225, 245, 0);
	border-bottom-color: #A9ADAE;
	border-width: 10px;
	margin-left: -37px;
}
.lockSelect {background-color: #ffffff;
    border: 1px solid #a9adae;
    border-radius: 4px;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
   	 float: left;
    height: auto;
    margin:40px -8.2% 0;
    min-height: 30px;
    padding: 10px;
    position: absolute;
    width: 300px;
    z-index: 100;;}
.unlockBtn {    color: #fff;
    font-size: 12px;
    margin: 10px 37% 0;}
.unlockBtn label {pointer-events: none;}
.missDocDiv {    width: 600px;
    left: 0;
    top: 40px;
    padding: 0;
    box-shadow: 2px 8px 20px 1px #46494A;
    border-radius: 0px;}
.missDocDiv:before {left: 10px!important;} 
.missDocDiv:after{left: 10px!important;}    
.missingDocScroll {height: 300px;
    float: left;
    overflow-y: scroll;
    width: 100%;}
.missingDocScroll table td:nth-child(1) i.fa {font-size: 16px; color: #333;     font-size: 16px;
    color: #615555;
    margin-left: 10px;}
        
.missingDocScroll td {
	padding: 5px;
    font-size: 13px;
    color: #555;
}     

.mega-dropdown-menu:before {
    content: "";
    border-bottom: 10px solid #fff;
    border-right: 12px solid transparent;
    border-left: 12px solid transparent;
    position: absolute;
    top: -8px;
    left:44.5%;
    z-index: 10;
}
.mega-dropdown-menu:after {
    content: "";
    border-bottom: 10px solid #fff;
    border-right: 12px solid transparent;
    border-left: 12px solid transparent;
    position: absolute;
    top: -8px;
    left: 44.5%;
    z-index: 8;
}
.editCloseBtn { 
 	font-size: 11px;
    padding: 0 5px;
    position: absolute;
    right: 121px;
    top: 0px;
    z-index: 1000;
}
</style>

	
	
	
		
		
	




<nav class="navbar navbar-inverse navbar-fixed-top" >
        <div id="fileMenuBarContainer" >
        <div class="page-loader file-view-load">
			<div id="ajaxLoader" style="">
				<img  src="../images/loader-bar.gif" width="900" height="5" style=" z-index: 10000;">
			</div>
		</div>
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle fileNavbarToggle"  onclick="fileMenuNav()">
                   <i class="fa fa-navicon"></i>
                </button>
               <span class="guideline">
				
				
					
					
					
					
						
						
							&nbsp;File KMRL/Admin/HORTICULTURIST/2019/7
						
					

					
				
			</span>
			<ul class="fileIconActions ">
			     <li>
					<a href="javascript:void(0);" style="cursor: pointer;" onclick="viewDetails('4aa7ffa7-f153-4847-8bb2-bdd8107adae6','File','/ddfs','KMRL/Admin/HORTICULTURIST/2019/7')" title="Time Line" class="`">
						<i title="Timeline" class="fa fa-clock-o " ></i>
					</a>
				</li>
					
				
				 <li>
					<a href="javascript:void(0);" onclick="showFileRemark('4aa7ffa7-f153-4847-8bb2-bdd8107adae6')" title="File Remarks" class="`">
						
							<i class="fa fa-comments-o" style="font-size:18px;"></i>
						
					</a>
				</li>
				
				
					<li>
						<a href="javascript:void(0);" onclick="showFileTags()" title="File Tags" class="icon-link">
							
								<i class="fa fa-tags"  style="font-size:18px;"></i>
							
						</a>
					</li>
					
					
					
							<li>
								
								
									<a href="javascript:void(0);" title="Mark As Confidential" onclick="markAsConfidential('4aa7ffa7-f153-4847-8bb2-bdd8107adae6', 'false','false')" class="icon-link" >
										<i class="fa fa-eye-slash" title="Mark As Confidential" style="/*color:#5DC279 !important;*/font-size:19px;"></i>
									</a>
								
							</li>
							
					
					
				
				
				
				
				
				
				 
					
				
				<li class="dropdown mega-dropdown" onclick="openActionItemsPopUp('4aa7ffa7-f153-4847-8bb2-bdd8107adae6')"  title="Action Items">
					        <a href="javascript:void(0);" id="actionItemId" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell"> </i> </a>
			
				</li>
				
				<label class="file-tag-subject" id="FileTopic2" style="display: none;">Subject : Kochi Water Metro / DSC</label>
				
			</ul>
            </div>
            <a id="closeLnk"  href="#" class="file-view-close" title="Close" onclick="unlockAndCloseFile('4aa7ffa7-f153-4847-8bb2-bdd8107adae6')">
						<i class="fa fa-close"></i>
					</a>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="fileView-navbar-collapse" >
                    <ul class=" fileViewMenu nav navbar-nav" id="navi">
				
				
					
						
							<li>
								
								
								<a id="fileInfoMenu" class=""
									href="/ddfs/files/viewInformation.do?fileMenuResourceId=fileInfoMenu&_decoration=true&refreshParent=false&fileAction=viewInfo&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
									Information
								</a>
						
					
					
				
					
						
							<li>
								
								
								<a id="fileAttachmentsMenu" class=""
									href="/ddfs/files/fileAttachments.do?fileMenuResourceId=fileAttachmentsMenu&_decoration=true&fileAction=fileAttachments&refreshParent=false&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
									Attachments
								</a>
						
					
					
				
					
						
							<li>
								
								
								<a id="fileNotesMenu" class=""
									href="/ddfs/files/notesContainer.do?fileMenuResourceId=fileNotesMenu&_decoration=true&refreshParent=false&fileAction=legacyNoteView&zoomFileView=false&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
									Notes
								</a>
						
					
					
				
					
						
							<li>
								
								
								<a id="fileDraftsMenu" class=""
									href="/ddfs/files/viewDrafts.do?fileMenuResourceId=fileDraftsMenu&_decoration=true&fileAction=viewDrafts&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
									Drafts
								</a>
						
					
					
				
					
						
							<li>
								
								
								<a id="fileDocumentsMenu" class=""
									href="/ddfs/files/viewDocuments.do?fileMenuResourceId=fileDocumentsMenu&_decoration=true&fileAction=viewDocs&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
									Documents
								</a>
						
					
					
				
					
						
							<li>
								
								
								<a id="fileScratchpadMenu" class=""
									href="/ddfs/files/scrachPadView.do?fileMenuResourceId=fileScratchpadMenu&_decoration=true&fileAction=viewScratchPad&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
									ScratchPad
								</a>
						
					
					
				
					
					
						
					
				
					
					
						
					
				
					
					
						
					
				
					
					
						
					
				
				
				
					<li>
						<div class="submenu-last">
							<a id="fileMoreLink" href="#" class="file-more-down">
								<i class="fa fa-angle-double-down"></i>
							</a>
							<div class="file-more-link">
								<ul>
									
										
									
										
									
										
									
										
									
										
									
										
									
										
											<li>
												
												
												<a id="fileDespatchMenu" class=""
													href="/ddfs/files/viewDespatches.do?fileMenuResourceId=fileDespatchMenu&_decoration=true&fileAction=viewDespatch&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
													Despatch
												</a>
											</li>
										
									
										
											<li>
												
												
												<a id="fileInwardsMenu" class=""
													href="/ddfs/files/viewTapals.do?fileMenuResourceId=fileInwardsMenu&_decoration=true&fileAction=viewTapals&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
													Inwards
												</a>
											</li>
										
									
										
											<li>
												
												
												<a id="fileReferencesMenu" class=""
													href="/ddfs/files/viewMergedFileReferences.do?fileMenuResourceId=fileReferencesMenu&_decoration=true&fileAction=viewFormFileReferences&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
													References
												</a>
											</li>
										
									
										
											<li>
												
												
												<a id="fileHistoryMenu" class=""
													href="/ddfs/files/viewHistory.do?fileMenuResourceId=fileHistoryMenu&_decoration=true&fileAction=viewHistory&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fromQueue=null">
													History
												</a>
											</li>
										
									
							</ul>
							</div>
						</div>
					</li>
				
				
                </ul>
            </div>

            <!-- /.navbar-collapse -->
        </div>

        <div class="submenu-bottom">
          <a class="editCloseBtn btn btn-danger btn-xs" style="display: none;" onclick="closeEditor()">Close Editor</a>
         <iframe id="onlyofficeFrame" style="display:none;position:fixed;left:0;width:100%;height:100%;border:0;top:0;"></iframe>
			<label class="file-tag-subject" id="FileTopic1" style="display: block;">Subject : Kochi Water Metro / DSC</label>
			<div class="file-view-sub-menu">
			<ul>
				
						
								
					
								
						
					
				
				 	
						<li>
							<a href="#" onclick="return showcurrents()" name="nonAjaxLink">File View</a>
						</li>
						<li>
							<a href="#" onclick="return hidecurrents()" name="nonAjaxLink">Notes View</a>
						</li>
						<li>
							<a href="#" onclick="return compareView()" name="nonAjaxLink">Compare View</a>
						</li>
					 
				
			</ul>
			</div>
		</div>


        <!-- /.container -->
    </nav>

	<div id="fileTagDialogDiv" style="display: none;">
		<div id="site-top-bar-tags-frame" style="margin:0px;">
			<div id="site-top-bar-tags-content">
				<label style="float: left; margin-bottom: 5px;">Tag the File with keywords. These tags will be utilized while searching.</label>
				<input type="text"  name="tags" id="tags" value="" />
			</div>
		</div>
	</div>
	<script>

		$(document).ready(function(){
			$(".submenu-last").bind('click', function(){
				$(".file-more-links").slideToggle(200);
			});
		});

	</script>
			<div id="componentview" >
				



































<style>

/* body{overflow-y:hidden;} */
.ui-widget-header {
    background: none repeat scroll 0 0 #F8F9F9 !important;
    border-color: #D8E0E1 !important;
    border-style: solid !important;
    border-width: 1px !important;
    padding: 0;
}
body { background-color: #626465;}
#noteAttachmentContent15 ul li {border: none !important;}
.submenu-bottom {  border-bottom: 1px solid #c8c8c8;}
</style>
<script>
var notesLoaded = false;
$(document).ready(function() {
	$('#switchViewTabs').tabs();
	$('#currentTab').trigger('click');

	

	
	$('#noteTab').bind('click',function(event) { 
		if (!notesLoaded) {
			noteAttachTabsArea();
			$('#noteIFrame').remove();
			$("#tab2").html('<div id="noteIFrameContainer" style="float:left;margin-left:0px;width:100%;">' +
						'<iframe id="noteIFrame" src ="exportNotesAttachmentImg1554271539000.do?exportType=noteAttachments&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fileDisplayNo=KMRL/Admin/HORTICULTURIST/2019/7&pageNo=0&ts=1554271539000"   style="border:none; float:left; width:100%; height:536px;" frameborder="0"	>' +
						'<p>Your browser does not support iframes.</p>' +
						'</iframe>'
					+ '<br clear="all" /></div><br clear="all"/>', function(){});
		}
		return false;	
		adjustFrameHeight();
		notesLoaded = true;
	});

	var  notesFileLoaded = false;
	$('#completeNoteFileTab').bind('click',function(event) { 
		$('#tab3').hide()
		if (!notesFileLoaded) {
			$("#tab100").html('<link rel="stylesheet" href="/ddfs/css/note-tabs.css" type="text/css" media="screen" /><div id="completeNoteFileContent"></div>');
			$("#completeNoteFileContent").load("/ddfs/notes/list.do?fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&start=1&end=2000&notePara=true&copyToEditor=false&noCheckBox=true",
					function(){adjustFrameHeight()});
		}
		return false;	
		notesFileLoaded = true;
	});


	
	$('#currentTab').bind('click',function(event) {
		//$('#noteIFrame').remove();
		
		$('#customIFrame').remove();
		adjustFrameHeight();
		return false;	
	});

	
	$(window).resize(function() {
		adjustFrameHeight();
	});

	$('#customTab').bind('click',function(event) {
		adjustFrameHeight();
		return false;
	});
	if(screen.height == screen.availHeight || ((screen.height - screen.availHeight) < 25)){
		window.resizeTo(screen.availWidth, (screen.availHeight - 25));
	}
	adjustFrameHeight();
	// showcurrents();
	
	
		resizeFileViewIframe();
		hidecurrents();
		
	
});






function adjustFrameHeight() {

	var actionBarOffset = $("#actionbar").offset();
	var menuBarOffset = $("#fileMenuBarContainer").offset();
	var contentHeight = actionBarOffset.top - (menuBarOffset.top + 50);
	//alert(contentHeight  + ' changed = ' + actionBarOffset.top + " - " + menuBarOffset.top);
	//$("#notesFrame").css("height",(contentHeight-10));
	//$("#tab1").css("height", (contentHeight-42));
	//$("#currentsIFrame").attr("height", (contentHeight-42));
	//$("#noteIFrame").css("height", (contentHeight-42));
	//$("#customIFrame").css("height", (contentHeight-42));
	$("#note_page").css("height", (contentHeight-50));
	$("#note_page").css("overflow-y", "scroll");
}

$(document).ready(function() {
	switchViewTabsArea();
	resizeFileViewIframe();
	resizeNotesViewArea();
	customIFrameTabsArea();
	noteAttachTabsArea();
  $(window).resize(function() {
	  switchViewTabsArea();
	  resizeFileViewIframe(); 
	  resizeNotesViewArea();
	  customIFrameTabsArea();
	  noteAttachTabsArea();
	});
  
});

 function resizeFileViewIframe() {
    $height = $(window).height() -102;
    $('#notesFrame').height($height);
} 
 function resizeNotesViewArea() {
	    $height = $(window).height() -102;
	    $('#notesViewFrame').height($height);
	}  
 
   function switchViewTabsArea() {
    $height = $(window).height() -140;
    $('#currentsIFrame').height($height);
}   
   function noteAttachTabsArea() {
    $height = $(window).height() -140;
    $('#noteIFrame').height($height);
	} 
   
   function customIFrameTabsArea() {
	    $height = $(window).height() -142;
	    $('#customIFrame').height($height);
	} 
    
</script>




	
	
		<div id="switchViewTabs" class="file-view-tabs col-md-6 col-sm-12 col-xs-12 pull-right">
	
	
		<ul>
			<li>
				<a id="currentTab" name="nonAjaxLink" href="#tab1" onclick="return loadFileView()">
					<span style="cursor:pointer;">
						File View
					</span>
				</a>
			</li>
			
				<li><a id="completeNoteFileTab" href="#tab100">Note File</a></li>
				<li><a id="noteTab" href="#tab2">Note Attachments</a></li>
				<li>
					<a href="javascript:void(0)" onclick="return showDocsInFileDialog('4aa7ffa7-f153-4847-8bb2-bdd8107adae6')">
						<span style="cursor:pointer;">
							All Items
							<img src="/ddfs/images/external.png" height="16" width="16" style="margin: -3px -1px 0 0;"/>
						</span>
					</a>
				</li>
				
			
			<span id="zoom"  class="zoom-arrow-right" onclick="return zoom();"></span>
			<span id="dezoom"  class="zoom-arrow-left" onclick="return dezoom();"></span>
			
		</ul>
		<div id="tab1">
		</div>
		<div id="tab2">

		</div>
		
		<div id="tab3">
			
		</div>
		
		<div id="tab100">
		</div>
		<br clear="all" /> 
	</div>
	
	
	<div id="notesViewFrame"  class="col-sm-12 col-xs-12" style="float: left;">
		
			<iframe id="notesFrame" name="notesFrame"  frameborder="0" 
			src ="viewNotesWithDependencies.do?rand=0.6566633495479524&_decoration=false&fileAction=viewNotes&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&compare=0" 
			width="100%" style="border:none;overflow-y:scroll;"	class="ui-helper-clearfix notePageFrame">
			  <p>Your browser does not support iframes.</p>
			</iframe>
		
	</div>

<div id="viewFileDocsDialog" title="Create New Bookmarkable Item" style="display:none">	
</div>
<div id="extractedContent" style="display:none;"></div>

<script>


function showDocsInFileDialog(fileNo) {
	$(".ui-tabs-panel").hide();
	$("#tab3").show();
	$("#bookmarkItemsCombo").empty();
	$("#viewFileDocsDialog").empty();
	$("#viewFileDocsDialog").load("getAllReferencesForBookmarking.do?fileNo=" + fileNo + "&renderInFrame=true&action=allItems");
	
	var $viewFileDocsDialog = $("#viewFileDocsDialog").dialog({
		autoOpen: false,
		bgiframe: true,
		resizable: true,
		height:500,
		width:800,
		modal: true,
		title: 'View Item',
		overlay: {
			backgroundColor: '#000',
			opacity: 0.5
		}
	});
	
	$viewFileDocsDialog.dialog('option', 'buttons', 
			{ 	'View Inline': function() {
				if($("input[name^='docItemInFile']:checked").length==1){
					var selectedItemForCustomTab = $("input[name^='docItemInFile']:checked").val();
					renderCustomTab(selectedItemForCustomTab, true);
					$("#viewFileDocsDialog").dialog('close');
					return false;
				}else{
					displayCommonMessageDialog("Please select an item.");
				}
					
				},
				 'Cancel': function() {
					$("#viewFileDocsDialog").dialog('close');
					return false;
				 }
			});
	$viewFileDocsDialog.dialog('open');
	return false;
}

function refreshNotesFrame() {
		// Added param tmp to avoid caching.
	$("#notesFrame").attr("src", $("#notesFrame").attr("src")+"&tmp="+Math.random().toString(36).substr(2));
}

function loadFileView() {

	var fileViewContent = '';
		fileViewContent = '<iframe src ="getCurrentFileImage1554271539000.do?fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&fileDisplayNo=&pageNo=0&ts=1554271539000"' +  
				'style="border-bottom:1px solid #8a8c8e !important; float:left; width:100%;" frameborder="0"' +
				'id="currentsIFrame">' +
			  '<p>Your browser does not support iframes.</p>' +
			'</iframe>';
		$("#tab1").html(fileViewContent, function() {});
	adjustFrameHeight();
	return false;
	
}
	


function renderCustomTab(docCode, inline) {
	var baseUrl = 'http://ddfs.kochimetro.org:80/ddfs/';
	$('#switchViewTabs').tabs('option', 'active', 3);
	var selection = docCode;
	
	if (selection != null && selection != '') {
		var selectionArr = selection.split("#");
		var customPdfPath="";
		if(inline) {
			if(selectionArr[0] == 'Merged File') {
				customPdfPath = '/ddfs/files/exportNotesAttachmentImg1554271539000.do?code=' + selectionArr[1] +  ':' + selectionArr[0] + ':' + selectionArr[4];
			} else {
				customPdfPath = '/ddfs/files/exportNotesAttachmentImg1554271539000.do?code=' + selectionArr[4] +  ':' + selectionArr[0] + ':' + selectionArr[1];
			}
		}else{
		 customPdfPath = 'openReferencibleItem.do?code=' + selectionArr[4] +  ':' + selectionArr[0] + ':' + selectionArr[1];
		}
		 var fullPathToCustomPdf = customPdfPath;
		customPdfPath=customPdfPath.replace(" ", "_");
		fullPathToCustomPdf=fullPathToCustomPdf.replace(" ", "_");
		if (inline) {
			fullPathToCustomPdf = fullPathToCustomPdf + "&pdfview=true";
		}
		
		$('#customIFrame').remove();
		$("#tab3").html('<iframe id="customIFrame" src ="' + fullPathToCustomPdf + '"' + 
					'style="border:none; float:left; width:100%;overflow-y: scroll;"  frameborder="0">' + 
					'<p>Your browser does not support iframes.</p></iframe>'
				+ '<br clear="all" /><br clear="all"/>');
		customIFrameTabsArea();
	}
	adjustFrameHeight();
}

function zoom() {
	$("#switchViewTabs").show();
	$("#switchViewTabs").width('99%');
	$("#notesViewFrame").hide();
	$("#zoom").hide();
	$("#dezoom").show();
	$("#compareViewers").hide();
	return false;
}
function dezoom() {
	$("#switchViewTabs").width('49%');
	$("#notesViewFrame").show();
	$("#dezoom").hide();
	$("#zoom").show();
	$("#compareViewers").hide();
	return false;
}
function hidecurrents() {
	$("#switchViewTabs").hide();
	$("#notesViewFrame").show();
	$("#notesViewFrame").addClass('col-sm-12');
	$("#notesViewFrame").removeClass('col-sm-6');
	$("#showcurrents").show();
	$("#hidecurrents").hide();
	$("#compareView").show();
	try {
		window.notesFrame.hideCompareView();
	} catch (e) {
		// TODO: handle exception
	}
	return false;
}
function showcurrents() {
	$(".toggler-button").hide();
	$("#notesViewFrame").addClass('col-sm-6');
	$("#notesViewFrame").removeClass('col-sm-12');
	//$("#switchViewTabs").width('49.2%');
	$("#notesViewFrame").show();
	$("#switchViewTabs").show();
	$("#dezoom").hide();
	$("#zoom").show();	
	$("#showcurrents").hide();
	$("#hidecurrents").show();
	loadFileView();
	$('#notesFrame').each(function() {
	    $('#compareViewers', this.contentWindow.document||this.contentDocument).hide();
	});
	try {
		window.notesFrame.hideCompareView();
	} catch (e) {
		// TODO: handle exception
	}
	return false;
	
}
function compareView() {
	$('.pageNumberClass').removeClass('pageNumberFixed');
	 $('.notesHeaderDiv').removeClass('notesHeaderFixed');
	$("#switchViewTabs").hide();
	$("#notesViewFrame").show();
	$("#notesViewFrame").addClass('col-sm-12');
	$("#notesViewFrame").removeClass('col-sm-6');
	$("#showcurrents").show();
	$("#hidecurrents").show();
	$("#compareView").hide();
	return window.notesFrame.showCompareView();
	//return false;
}
function extractContentDialog() {
	
	window.open('/ddfs/files/extractContentView.do?fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&displayFileNo=','extractWindow','menubar=no,toolbar=no,scrollbars=1,directories=no,status=no,location=no,fullscreen=no,width=750,height=400,left=50%,top=50%');
	
}

</script>


			</div>
			
				
			
		</div>
		<br clear="all"/>
		<script>
			function setParamForAttachForm(chkbox) {
				if(chkbox.checked) {
					$("#isCurrent").val("true");
				} else {
					$("#isCurrent").val("false");
				}
			}
		</script>

		<div id="deleteDialog" title="Delete?" style="display:none">
			<div class="info-message" style="padding: 0px 0px 0px 34px;">	The item will be permanently deleted. Are you sure? 
			</div>
		</div>

		<div id="forwardDialog" title="Forward" style="display:none">
			<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
			
			
			The File is forwarded to . To close this window, press OK.</p>
		</div>

		<div id="attachmentEditDialog" title="Edit attachment" style="display:none">
			<form id="attachmentEditForm"   action="../files/file.do?fileAction=editAttachment" method="post">
				<input type="hidden" name="fileNo" value="4aa7ffa7-f153-4847-8bb2-bdd8107adae6" />
				













<script>
$(function() {
	$(':input[name^="description"]',$("#attachmentEditDialog")).keypress(function (e) {  
		        if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {  		        			        
		          //	$('button').click(); 
		        	$('#attachmentEditDialog').dialog('close');
		       		e.keyCode='';	
		       		e.which ='';	       
		           	return false;  
		        } else {  
	            	return true;  
		       }  
		   });  
});


</script>
	<div id="attchmentPanel">
		<input type="hidden" name="action" value="upload"/>
		<input type="hidden" name="attachmentId"/>
		<input type="hidden" name="tempOperation" value="false">
		<div style="width:400px;float:left;padding:6px;">
			<fieldset style="padding:6px; border:1px solid #5C9CCC; background:#FEFEFE">
				<span class="inp_text" style="width:70px;">Description</span>
				<span class="inp_entry"><input name="description" id="attachmentDesc" style="width:272px;" type="text"/></span>
				<br clear="all"/>
				
			</fieldset>
		</div>
	</div>

			</form>
		</div>

		<script>

			if (document.getElementById('msgDialog')) {
			 	displayMessageDialog();
			}

			$(document).ready(function() {
			 	$('title').html('KMRL/Admin/HORTICULTURIST/2019/7');
			});

			function UnparkFormSubmit() {
				var url = "/ddfs/files/addRef.do";
				$.post( url, {
					"fileAction": "unparkDirect",
					"fileNo": "4aa7ffa7-f153-4847-8bb2-bdd8107adae6"},
					      function(response) {
					      openPopUpWindow('File Unparked');
					      location.reload();
					   }
					    );
				}
			
			function showParkedFileDialog() {
				var $parkedDialog = $("#parkedFileDialog").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					width:300,
					modal: true,
					title: 'Parked file',
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});
				
				
				$parkedDialog.dialog('option', 'buttons',
						{

					'Unpark': function() {
						UnparkFormSubmit();
						$parkedDialog.dialog('close');
					},
					'Ok': function() {
						$parkedDialog.dialog('close');
					}
					});
				
				
				


				$parkedDialog.dialog('open');

				return false;
			}

		</script>

		<div id="addChitDialog" title="Forward File?" style="display:none;float: inherit">
			<p>
				<br clear="all" />
				<span  style="float:left; margin:0 7px 10px 0;">
					<img src="/ddfs/images/alert-icon.png" height="24" width="24" style="vertical-align:middle; margin-top:-6px;"/>
				</span>
				<label style="float:left; margin-left:0px;">Enter text if you need to add a sticky note.</label>
				<br clear="all" />
				<label style="float:left;margin-left:10px;margin-top:0px;">
					<img src="/ddfs/images/note.png" height="75" width="61"/>
				</label>
				<span class="inp_entry" style="float:left;;margin-left:0px;">
					<textarea id="chitContentInput" style="width:250px; height: 100px; border:1px dashed #cd92cc; background-color:#fef7fe; color:#666;" ></textarea>
				</span>
			</p>
		</div>

		<div id="parkedFileDialog" title="Parked File" style="display:none">
			<div class="info-message" style="background-size: 18px!important; padding: 5px 5px 5px 28px;">Please note - This is a parked file.</div>
		</div>

		<div id="takeFileDialog" title="Pull File?" style="display:none">
		<div class="info-message" style="padding: 5px 0px 5px 34px;">The file will be moved to your seat. Are you sure?
		</div>
			
			<!-- <p><br clear="all" /><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
			The file will be moved to your seat. Are you sure?</p> -->
		
			<br clear="all" />
			<label class="mandatory">Reason for pulling this file</label>
			<br clear="all" />
			<span>
				<textarea id="pullFileComment" name="pullFileComment"></textarea>
			</span>
		</div>
		<div id="reCallFileDialog" title="ReCall File?" style="display:none">
			<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
			The file will be moved to your seat. Are you sure?</p>
		</div>

		<div id="fileTakenDialog" title="File Taken Back!" style="display:none">
			<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
			The file is taken and is available in your file list. To close this window, press OK. </p>
		</div>
		<div id="actionInProgressDialog" title="Processing ..." style="display:none">
			<p style="float:left;">
			<img alt="Loading" src="/ddfs/images/ajax-loader.gif" height="31" width="31" style="padding-left:45px; top:20px; position:absolute;"/>
			</p>
		</div>

		<div id="createBookmarkItemDialog" title="Create New Bookmarkable Item" style="display:none">
			<p style="margin:0px 0px 15px 0px;"><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 5px 0;"></span>
				Please select a document from the following list.
				<br clear="all" />
				<form id="createBookmarkItemFrm" action="/ddfs/files/file.do?_decoration=false&fileAction=createBookmarkableItem" method="POST">
					<input type="hidden" name="fileNo" value="4aa7ffa7-f153-4847-8bb2-bdd8107adae6" />
					<input type="hidden" name="refreshParent" value="true" />
					<div class="inp_entry" id="bookmarkItemsCombo" style="text-align:left;height:175px;width:97%;margin-bottom:10%;"></div>
					<div class="ddfs-search-two-column-container" style="border: 1px solid;width: 97%;padding: 2%;border-color: #C5CACF;margin-left: 0px;margin-top: 1%;">
						<div class="form-column">
						    <label class="mandatory">Description</label>
							<textarea name="descForBookmark"></textarea>
						</div>
						<div class="form-column">
							<div style="width:50%;margin-top:8%">
								<label class="mandatory" for="startPage" style="width:50%;">Page From</label>
								<input type="text" id="startPage" name="startPage" style="width:60px;" maxlength="4"/>
							</div>
							<div style="width:50%;margin-top:1%">
								<label class="mandatory" for="endPage" style="width:50%;">Page To</label>
								<input type="text" id="endPage"  name="endPage" style="width:60px;" maxlength="4"/>
							</div>
							<input type="hidden" name="isBookMarkItem" value="true">
						</div>
	       			</div>
			   		<input type="hidden" name="test" value=""/>
			   		<input type="hidden" id="rectxcord"/>
					<input type="hidden" id="rectycord"/>
					<input type="hidden" id="rectwid"/>
					<input type="hidden" id="rectheight"/>
				</form>
				</p>
		</div>

		<div id="createSplitDocumentDialog" title="Split Document" style="display:none">
				<div class="info-message">Please select a document from the following list.</div>
				<form id="createSplitDocumentFrm" action="/ddfs/files/file.do?_decoration=false&fileAction=createBookmarkableItem&excludeBookmark=false" method="POST">
					<input type="hidden" name="refreshParent" value="true" />
					<div  id="splitDocumentCombo" >
					</div>
					<br clear="all"/><br clear="all"/>
					<div class="pull-left w100">
						<div class="col-md-4 col-sm-6 col-xs-12">
							<label class="mandatory">Document Title</label>
							<input type="text" name="descForBookmark" class="form-control" maxlength="200"/>
						</div>
						<div class="col-md-4 col-sm-6 col-xs-12">
						<label style="float: left; width: 100%" class="mandatory">Pages  </label>
						<div class="w47 float-left" style="margin-right: 6%;">
							<input type="text" id="startPage" name="startPage" class="form-control"  placeholder="From" maxlength="4"/>
						</div>
						<div class="w47 float-left" >	
							<input type="text" id="endPage"  name="endPage" class="form-control"  placeholder="To" maxlength="4"/>&nbsp;
						</div>
						</div>
						<input type="hidden" name="isBookMarkItem" value="false">
						 
	       			</div>
			   		<input type="hidden" name="test" value=""/>
			   		<input type="hidden" id="rectxcord"/>
					<input type="hidden" id="rectycord"/>
					<input type="hidden" id="rectwid"/>
					<input type="hidden" id="rectheight"/>
				</form>
				</p>
		</div>

		

		


















<style>
#viewDefaultForwardDialog form {
    float: left;
    padding: 6px 1%;
    width: 98%;
}
#viewDefaultForwardDialog form label.forwardLabel {color: #067ba9;  float: left;  }
#viewDefaultForwardDialog form span.forwardSpan { color: #b56324;
    float: left;
    font-weight: bold;}
#viewDefaultForwardDialog form input.form-button {float: right;}
.ui-autocomplete {
    max-height: 230px;
    overflow-y: auto;   /* prevent horizontal scrollbar */
    overflow-x: hidden; /* add padding to account for vertical scrollbar */
}
/* IE 6 doesn't support max-height
 * we use height instead, but this forces the menu to always be this tall
 */
* html .ui-autocomplete {
    height: 250px;
}
</style>

<script type="text/javascript">
/* $(document).ready(function(){
	$('#actionbar li span').attr('style','');
	$('#book_mark_id span').css('background','none');
	$('#forward_id span').css('background','none');
	
}); */
</script>





		<div id="actionbar" >
		
				
					
					   	<ul>
					      <li id="export_id" class="" title="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Export File As PDF">
						  	<a id="nonAjaxLink" href="#" onclick="return viewExportables();">
				      			<i class="fa fa-file-pdf-o"></i>
				      			Export
				      	    </a>
					      </li>
					   	</ul>
				   	
				   	
				   	
				   	
						
				   	
				   	
				   	
			   	
			   	
			   					
			   					
				   	
					   	<span class="jx-separator-left"></span>
					   	<ul> 
					      <li class="" title="Forward File Within Hierarchy" id="forward_id">
					           
					      	<a id="nonAjaxLink" href="#" onclick="return viewDefaultForwardOptions();">
					      		<i class="fa fa-forward"></i>
				      		    Forward
				      		</a>
		      		      
					      </li>
					   	</ul>
				   	
				   	
				   	
				   	
				   		<span class="jx-separator-left"></span>
				   		
				   		
				   		
				   			
				   		
				   		
					   		
					   		
							   	<ul >        
							      <li id="forwardplusgen_id"  title="Forward File Outside Hierarchy" >
								    
								  <a id="nonAjaxLink" href="#" onclick="return viewForwardOptions();" > 
						      			<i class="fa fa-forward"></i>
						      			Forward <sup><i>++</i></sup>
						      	     </a>
						      	  
							      </li>
							   	</ul>
						   	
					   	
				   	
				   	
				   	
				
				
				
				
					
					   	
					
				
			   	
			   	
			   	
				   	
			   	
			   	
			   	
			   	
			   	
				    
				    
				   	
			   
			   	
			   	
			   	
			   	
				   	
					   	<span class="jx-separator-left"></span>
					   	<ul>        
					      <li id="share_id" class="" title="Share File">
					      	<a id="nonAjaxLink" href="#" onclick="return shareFile();">
					      		<i class="fa fa-share-alt"></i>
				      			Share
				      		</a>
					      </li>
					   	</ul>
				   	
			   	
			   	
			   	
	 				<span class="jx-separator-right"></span>
				   	<ul class="jx-bar-button-right">
				      <li id="drafts_id" class="" title="Drafts"><a href="#"><img src="/ddfs/images/draftb.png" alt="" height="16" width="16"  />&nbsp;Drafts</a>
						  <ul>
						 	
						 		
						 			
							 		<li id="18a09d1c-0faf-4444-8c54-83f9bf07ce25" class="">
								 		<a href="/ddfs/draft/draftsContainerDisplay.do?_decoration=true&fileAction=viewDrafts&draftNo=18a09d1c-0faf-4444-8c54-83f9bf07ce25&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&displayFileNo=KMRL/Admin/HORTICULTURIST/2019/7&originalDeptId=1&clazz=circular&language=en">
								 			<span style="line-height:120%;">
								 				<u>Draft #2 - Circular</u> <br />
								 				<b>Topic: </b> 
								 			</span>
								 		</a>
							 		</li>
						 		
						 	
						  </ul>
				      </li>
				   	</ul>
			   	
			   	
			   
			   		
				   
			
			   	  	
			   	 
			   	
				   	
				   		 <span id="attachToWorkFlowActionBar">  
						   	<span class="jx-separator-right"></span>
						   	<ul class="jx-bar-button-right">
						      <li id="preview_id" class="" title="Attach To Workflow">
						      		
						      		
						      			
						      		
						      		<a id="nonAjaxLink" href="#" onclick="return showAttachToWorkflowDialog('/ddfs', '4aa7ffa7-f153-4847-8bb2-bdd8107adae6', '0', 'false','1','1');"> 
						      			<i class="fa fa-search"></i>
						      			Attach To Workflow
						      		</a>
							   	</li>
						   	</ul>
					   	</span>
				   	
				   	
				   		 <span id="cancelWorkFlowActionBar">  
						   	<span class="jx-separator-right"></span>
						   	<ul class="jx-bar-button-right">
						      <li id="preview_id" class="" title="Cancel Workflow">
						      		<a id="nonAjaxLink" href="#" onclick="return cancelWorkflowDialog('/ddfs', '4aa7ffa7-f153-4847-8bb2-bdd8107adae6', '0');"> 
						      			<i class="fa fa-search"></i>
						      			
						      			
						      				Exit Manual Workflow
						      			
						      		</a>
							   	</li>
						   	</ul>
					   	</span>
				   	
			   
		   	
			   	
			   	
		
			   		<span id="saveNoteFromActionBar" >  
				   		
						   	<span class="jx-separator-right"></span>
						   	<ul class="jx-bar-button-right">
						      <li id="savenote2_id" class="" title="Save Note">
						      	<a id="nonAjaxLink" href="#" onclick="return saveSwitchViewNoteFromActionBar();"> 
						      		<i class="fa fa-save"></i>
						      		 Save Note
						      	</a>
						      </li>
						   	</ul>
					   	
				   	</span>
				
			   	
			   	
			   	
			   	
			   	
				   	<span id="draftSaveBtnFromActionBar" style="display:none;">
					   	<span class="jx-separator-right"></span>
					   	<ul class="jx-bar-button-right">
					      <li id="savedraft_id" class="" title="Save Draft">
					      	<a id="nonAjaxLink" href="#" onclick="return saveDraftFromActionBar();"> 
					      		<i class="fa fa-save"></i>
					      		Save Draft
					      	</a>
					      </li>
					   	</ul>
					 </span>
				 
				 <span id="draftPreviewBtnFromActionBar" style="display:none;">  
				   	<span class="jx-separator-right"></span>
				   	<ul class="jx-bar-button-right">
				      <li id="preview_id" class="" title="Preview Draft">
				      		<a id="nonAjaxLink" href="#" onclick="return viewDraftPreview();"> 
				      			<i class="fa fa-search"></i>
				      			Preview
				      		</a>
					   	</li>
				   	</ul>
			   	</span>
			   	
			   	<span id="draftApproveBtnFromActionBar" style="display:none;">  
				   	<span class="jx-separator-right"></span>
				   	<ul class="jx-bar-button-right">
				      <li id="approve_id" class="" title="Approve Draft">
				      		<a id="nonAjaxLink" href="#" onclick="return approveDraftFromActionBar();"> 
				      			<i class="fa fa-thumbs-up"></i>
				      			Approve
				      		</a>
					   	</li>
				   	</ul>
			   	</span>
			   	
			   	<span id="draftCreateDocBtnFromActionBar" style="display:none;">  
				   	<span class="jx-separator-right"></span>
				   	<ul class="jx-bar-button-right">
				      <li id="createdoc_id" class="" title="Create Document">
				      		<a name="createDocFromActionBar" id="nonAjaxLink" href="#" onclick="return createDocFromActionBar();"> 
				      			<i class="fa fa-file"></i>
				      			Create Document
				      		</a>
					   	</li>
				   	</ul>
			   	</span>
			   	
			   	 
			   	
			   	
			   	 
			   	
			   	 
			   	
			   	
				   	
					   	<span class="jx-separator-right"></span>
						<ul class="jx-bar-button-right">
						   <li id="createdoc_id" class="" title="Create Document">
						      	<a name="nonAjaxLink" id="addNewSeatSpChit" href="#" onclick="return addChitDialog('/ddfs');"> 
						      		<i class="fa fa-file"></i>
						      		Sticky Notes
						      	</a>
							</li>
						</ul>
					
				
			   	
			   	
			</div>
			
			<input type="hidden" id="targetDraftsForApproval" name="targetDraftsForApproval" value="0"/>
			
			
			<div id="viewDefaultForwardDialog" title="Forward File" style="display:none;line-height:20px;text-align:left;">
				<div class="noteAlert" style="padding:4px 4px 3px 5px;"></div>
				
					
				
				
				<div class="chit-textbox-div col-md-12">
				<label style="float:left;margin-left:10px;margin-top:0px;">
					<img src="../images/sticky-note.png"  height="62" width="60"/>
				</label>
				<span class="inp_entry" style="float: left; margin-left: 2%; width: 86%;">
					<textarea id="chitContentDefaultOptionsInput" placeholder="Enter text if you need to add a sticky note" style="width: 100%; float: left;" class="chit-textbox"></textarea>
				</span>
				</div>
				<br clear="all"/>
				













	
					
						
													
								
									<form name="expSeatFrm1" id="fileActionForwardExpectedFrm1" action="/ddfs/files/file.do?_decoration=true" method="POST">
										<input type="hidden" name="fileNo" value="4aa7ffa7-f153-4847-8bb2-bdd8107adae6" />
										<input type="hidden" name="instanceDisplayNo" value="KMRL/Admin/HORTICULTURIST/2019/7" />
										<input type="hidden" name="linked" value="false"/>
										<input type="hidden" name="merged" value="false"/>
										<input type="hidden" name="forwardGroupId" value=""/>
										<input type="hidden" name="closed" value="false"/>
										<input type="hidden" name="owner" value="0bab9a07-9412-4ed1-a7a2-9916d10fef9f"/>
										<input type="hidden" name="fileAction" value="forward" />
										<input type="hidden" name="departmentId" value="1" />
										<input type="hidden" name="refreshParent" value="true" />
										<input type="hidden" name="currentSeatId" value="" />
										<input type="hidden" name="originalDeptId" value="1"/>
										<input type="hidden" name="seatId" value="adb0f59a-aa43-4a7c-bc95-97e5d5101614"/>
										<input type="hidden" id="expSeatChitContent1" name="chit" value="" />
										<input id="expSeatFrmUnSubmittedNote" type="hidden" name="unSubmittedNote" />
										
											<div class="col-md-11 ">
											<label class="forwardLabel" >Forward To </label>
													<span class="forwardSpan form-control">
														GM ( deepak C )
													
													</span>
											</div>
											<div class="col-md-1" style="margin-top: 19px; padding: 0;">
												<input name="submit-button" type="button" class="btn btn-primary pull-right" onclick="chitAddDialogBox('fileActionForwardExpectedFrm1', 'expSeatChitContent1','GM')" value="Send" />
												</div>
											
									</form>
								
							
						
					
				
















						
										
						
														
							
							
															
								
								    	
								
								
								
								
									
								
								
								
								
								<form name="expSeatFrm2" id="fileActionForwardExpectedFrm2" action="/ddfs/files/file.do?_decoration=true" method="POST">
									<input type="hidden" name="fileNo" value="4aa7ffa7-f153-4847-8bb2-bdd8107adae6" />
									<input type="hidden" name="instanceDisplayNo" value="KMRL/Admin/HORTICULTURIST/2019/7" />
									<input type="hidden" name="linked" value="false"/>
									<input type="hidden" name="merged" value="false"/>
									<input type="hidden" name="forwardGroupId" value=""/>
									<input type="hidden" name="closed" value="false"/>
									<input type="hidden" name="fileAction" value="forward" />
									<input type="hidden" name="departmentId" value="1" />
									<input type="hidden" name="refreshParent" value="true" />
									<input type="hidden" name="currentSeatId" value="" />
									<input type="hidden" name="originalDeptId" value="1"/>
									<input type="hidden" name="owner" value="0bab9a07-9412-4ed1-a7a2-9916d10fef9f"/>
									<input type="hidden" id="expSeatChitContent2" name="chit" value="" />
									<input id="expSeatFrmUnSubmittedNote" type="hidden" name="unSubmittedNote" />
									<span id="childHierarchyForwardOptions"></span>
								</form>
								
							
						
						
			</div>
			<div id="viewForwardOptionsDialog" title="Forward File Outside Hierarchy" style="display:none;line-height:20px;">
			    <div class="noteAlert" style="padding:4px 4px 3px 5px;"></div>
				
					
				
				<div style="float:left;width:100%">
					<div class="chit-textbox-div">
					<label style="float:left;margin-left:10px;margin-top:0px;">
						<img src="../images/sticky-note.png"   height="75" width="61"/>
					</label>
					<span class="inp_entry" style="float: left; margin-left: 2%; width: 86%;">
						<textarea id="chitContentForwardOptionsInput" class="chit-textbox" placeholder="Enter text if you need to add a sticky note" style="width: 100%; float: left;"></textarea>
					</span>	
					</div>
					<br clear="all"/><br clear="all" />
				</div>
				<div style="float:left;width:100%">
					<div class="permission-tab-div" id="forwardPlusTab">
						<a href="javascript:void(0);" onclick="showTtab('fptab-1','fptab-2',this)" class="permission-tab-active" id="fptb1Atag">Within Department</a>
						
							
								<a href="javascript:void(0);" onclick="showTtab('fptab-2','fptab-1',this)" id="fptb2Atag">Outside Department</a>
							
						
					</div>
					<div id="fptab-1">
						
















<script>
$(function(){
    $(document).ready(function(){		
		$(".chosen-select").chosen({
		    disable_search_threshold: 1,
		    no_results_text: "Oops, nothing found!",
		    width: "100%"
		  });
	$(".chosen-select").next(".chosen-container").find(".chosen-drop").css("cssText", "bottom: 28px !important; top: auto !important; border-bottom: 0 none; border-top: 1px solid #aaa;");
	});
	
	$("#fileActionForwardToSameDeptFrm").relatedSelects({
		onChangeLoad: '../getSeatsForSection.do?forward=true',
		selects: ['sectionId', 'seatId'],
		onLoadingEnd : function(){
			$(".chosen-select").trigger("chosen:updated");
		}
	});
	
	
});

</script>
<style>
/* .chosen-select .chosen-container .chosen-drop {
    border-bottom: 0 none;
    border-top: 1px solid #aaa;
    bottom: 28px!important;
    top: auto!important;
} */
</style>


											
											<div class="forwardboxSelection" style="margin-bottom:14px;">
												<form name="deptSeatFrm" id="fileActionForwardToSameDeptFrm" action="/ddfs/files/file.do?_decoration=true" method="POST">
													<input type="hidden" name="fileNo" value="4aa7ffa7-f153-4847-8bb2-bdd8107adae6" />
													<input type="hidden" name="instanceDisplayNo" value="KMRL/Admin/HORTICULTURIST/2019/7" />
													<input type="hidden" name="linked" value="false"/>
													<input type="hidden" name="merged" value="false"/>
													<input type="hidden" name="forwardGroupId" value=""/>
													<input type="hidden" name="closed" value="false"/>	
													<input type="hidden" name="owner" value="0bab9a07-9412-4ed1-a7a2-9916d10fef9f"/>		
													<input type="hidden" name="fileAction" value="forward" />
													<input type="hidden" name="refreshParent" value="true" />
													<input type="hidden" name="currentSeatId" value="" />
													<input type="hidden" name="originalDeptId" value="1"/>
													<input type="hidden" name="departmentId" value="1"/>
													<input type="hidden" id="deptChitContent" name="chit" value="" />
													<input id="deptFrmUnSubmittedNote" type="hidden" name="unSubmittedNote" />
													<div class="file-Fwd-feilds">
													<select id="allSeatDummySelect" style="display: none;">
														
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
																
															
														
													</select>
														
														<div class="file-Fwd-div">
															<label> Section :</label>
															<select name="sectionId" class="file-fwd-select">
																<option value="all">-- All --</option>
																
																	<option value="1">Admin</option>
																
																	<option value="67e824be-22a3-427c-a3e8-c1387c2febf8">Administration</option>
																
																	<option value="dd140fff-a48d-45b7-8cc5-c7d0e0606a08">B</option>
																
															</select>
														</div>
														
														<div class="file-Fwd-div">
															<label> Seat </label>
															<select name="seatId" id="deptSeatId" class="file-fwd-select chosen-select" data-placeholder="-- Select --">
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
																	
																
															</select>
														</div>
														<input name="submit-button" style="margin: 24px 0 0 0;" type="button"  onclick="forwardDialog('fileActionForwardToSameDeptFrm','deptChitContent','deptSeatId')"  class="btn btn-success" value="Forward" />
													</div>
												</form>
											</div>
										
				    </div>
			        
						
							<div id="fptab-2" style="display:none;">
								

















												
													<div class="forwardboxSelection">
														<form name="otherDeptSeatFrm" id="fileActionForwardToOtherDeptFrm" action="/ddfs/files/file.do?_decoration=true" method="POST">
															<input type="hidden" name="fileNo" value="4aa7ffa7-f153-4847-8bb2-bdd8107adae6" />
															<input type="hidden" name="instanceDisplayNo" value="KMRL/Admin/HORTICULTURIST/2019/7" />
															<input type="hidden" name="linked" value="false"/>
															<input type="hidden" name="merged" value="false"/>
															<input type="hidden" name="forwardGroupId" value=""/>
															<input type="hidden" name="closed" value="false"/>	
															<input type="hidden" name="owner" value="0bab9a07-9412-4ed1-a7a2-9916d10fef9f"/>
															<input type="hidden" name="fileAction" value="forwardToOtherDept" />
															<input type="hidden" name="refreshParent" value="true" />
															<input type="hidden" name="currentSeatId" value="" />
															<input type="hidden" name="originalDeptId" value="1"/>
															<input type="hidden" id="otherDeptChitContent" name="chit" value="" />
															<input id="otherDeptSeatFrmUnSubmittedNote" type="hidden" name="unSubmittedNote" />
															<div class="file-Fwd-feilds">
																<div class="file-Fwd-div">
																	<label>Department</label>
																	<select name="otherDepartmentId"  id="otherDepartmentId" onChange="javascript:otherDeptForwardChange(this, 'getSeatsForOtherDept.do', 'otherDepartmentId', 'otherDeptSeatIds');"
																		class="file-fwd-select">
																		<option value="">-- Select --</option>
																		
																			<option value="1">KMRL(QTY)</option>
																		
																			<option value="346d3256-935c-11e7-8b87-44a842033feb">Kochi Water Metro</option>
																		
																	</select> 
																</div>	
																<div class="file-Fwd-div">
																	<label>Seat </label>
																	 <span id="otherDeptSeatIds" >
																	 	














<select name="otherDeptSeatId" id="otherDeptSeatId"  class="chosen-select" data-placeholder="-- Select --">
	<option value="">-- Select --</option>
	
</select>
<script>
	$(document).ready(function(){		
		$("#otherDeptSeatId").chosen({
		    disable_search_threshold: 1,
		    no_results_text: "Oops, nothing found!",
		    width: "95%"
		  });
	
	});
</script>
																	 </span>
																</div>
																<input name="submit-button" type="button" class="btn btn-primary" style="margin: 24px 0 0 0;"
																	onclick="forwardDialog('fileActionForwardToOtherDeptFrm','otherDeptChitContent','otherDeptSeatId')"  
																	value="Forward" />
															</div>
														</form>
													</div>
												

							</div>
						
					
					<br clear="all"/>
				</div>
				
			</div>
		
		
		
		<div id="confirmDocumentCreation" title="Confirm Document Creation" style="display:none;float: inherit">
			<span style="float:left;margin-left:0px;">
			<br clear="all" />
			<font size="2">
			Please confirm the format of PDF through 'Preview'. 
			Format/Content change of PDF after document creation is not allowed.
			Do you want to continue?</font>
			<br clear="all"/>		
			<br clear="all"/>
			<br clear="all"/>	 
			
				<span style="display:none;">
					<input type="checkbox" id="isStockFileCheckbox" name="isStockFileCheckbox" /> <font size="2">Add Document to Stock File.</font>
					<input type="checkbox" id="isStockFilePublicCheckbox" name="isStockFilePublicCheckbox" /> <font size="2">Public Stock File?</font>
				</span>
			
			</span>
		</div>
		
		<div id="returnSharedDialog" style="display: none;">
			<label style=" float: left;  margin: 10px 3%;width: 94%;">Are you sure, you want to return shared file?</label>
				<span class="file-return-span">
						
				</span>	
		</div>
		<script>
			function viewForwardOptions() {
				var proceedToForward = true;
				if ($("#targetDraftsForApproval").val() > 0) {
					var proceedWithoutApproval = confirm('You have 0 draft(s) for approval! Do you wish to forward without approving the draft(s)?');
					if (!proceedWithoutApproval) {
						proceedToForward = false;
						window.location.href = "/ddfs/files/viewDocuments.do?_decoration=true&fileAction=viewDocs&displayFileNo=KMRL/Admin/HORTICULTURIST/2019/7&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6";
					}
				}
				if (proceedToForward) {
					var $viewForwardOptionsDialog = $("#viewForwardOptionsDialog").dialog({
						autoOpen: false,
						bgiframe: true,
						resizable: true,
						width:800,
						modal: true,
						height: 'auto',
						title: 'Forward File Outside Hierarchy',
						overlay: {
							backgroundColor: '#000',
							opacity: 0.5
						}
						
					});		
					
					$viewForwardOptionsDialog.dialog('option', 'buttons', 
							{ 	
								 'Close': function() {
									$viewForwardOptionsDialog.dialog('close');
								 }
							});
					$viewForwardOptionsDialog.dialog('open');
					if(document.getElementById("notesFrame")!=undefined){
						if(document.getElementById("notesFrame").contentWindow.getHtmlNote 
								&& ''==$.trim(document.getElementById("notesFrame").contentWindow.getHtmlNote())) {
							 $("#viewForwardOptionsDialog > div.noteAlert").addClass('blankNoteAlert').html('You have not added note');
						} else{
							 $("#viewForwardOptionsDialog > div.noteAlert").removeClass('blankNoteAlert').empty();
						}
					}
				}
				return false;
			}

			var childHierarchyForwardOptionsLoaded = false;
			
			function viewDefaultForwardOptions() {
				var proceedToForward = true;
				if ($("#targetDraftsForApproval").val() > 0) {
					var proceedWithoutApproval = confirm('You have 0 drafts for approval! Do you wish to forward without approving the draft(s)?');
					if (!proceedWithoutApproval) {
						proceedToForward = false;
						window.location.href = "/ddfs/files/viewDocuments.do?_decoration=true&fileAction=viewDocs&displayFileNo=KMRL/Admin/HORTICULTURIST/2019/7&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6";
					}
				}
				if (proceedToForward) {
					enablePageButtons();
					var $viewDefaultForwardDialog = $("#viewDefaultForwardDialog").dialog({
						autoOpen: false,
						bgiframe: true,
						resizable: true,
						width:800,
						modal: true,
						title: 'Forward File Within Hierarchy',
						overlay: {
							backgroundColor: '#000',
							opacity: 0.5
						}
					});	
	
					
					$viewDefaultForwardDialog.dialog('option', 'buttons', 
							{ 	
								 'Close': function() {
									$viewDefaultForwardDialog.dialog('close');
								 }
							});
				
					if (childHierarchyForwardOptionsLoaded == false) {
						$("#childHierarchyForwardOptions").load( 
								"/ddfs/files/getChildHierarchyForwardOptions.do?fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&forwardedFromSeatId=0bab9a07-9412-4ed1-a7a2-9916d10fef9f");
						childHierarchyForwardOptionsLoaded = true;
					}
				
					$viewDefaultForwardDialog.dialog('open');
					if(document.getElementById("notesFrame")!=undefined){
						if(document.getElementById("notesFrame").contentWindow.getHtmlNote 
								&& ''==$.trim(document.getElementById("notesFrame").contentWindow.getHtmlNote())) {
							 $("#viewDefaultForwardDialog > div.noteAlert").addClass('blankNoteAlert').html('You have not added note');
						} else {
							 $("#viewDefaultForwardDialog > div.noteAlert").removeClass('blankNoteAlert').empty();
						}
					}
				}
				return false;
			}

			function saveNoteFromActionBar() {
				$("form[name='noteEditorForm']").submit();
				return false;
			}

			function saveFileInfoFromActionBar() { 
				$("form[name='fileInfoForm']").submit();
				return false;
			}

			function saveSwitchViewNoteFromActionBar() {
				top.notesFrame.handleFormSubmissionWithoutResponse(top.notesFrame.document.noteEditorForm);
				return false;
			}

			function saveDraftFromActionBar() {

				var $draftFrm = window.draftFrame.document.draftFrm;
				var statusOfDraft = window.draftFrame.document.draftFrm.statusOfDraft.value;
				var templateApproversSigned = window.draftFrame.document.draftFrm.signedStatus.value;				
				if(templateApproversSigned == "Signed"){
					var signed = "signed";
					if (statusOfDraft == 'APPROVED') {
						signed = "signed and approved";
					}
					conf = confirm("This Draft is already "+signed+". Any modification requires further signing.\nIf you want to save the Print Options ONLY, use 'Save Print Options'.");
					if(!conf) {
						return false;
					}
					window.draftFrame.disableButtons();
				}
				else if (statusOfDraft == 'APPROVED') {
					window.draftFrame.disableButtons();
					var conf = false;
					if(statusOfDraft == 'APPROVED') { 
						conf = confirm("This Draft is already approved. Any modification requires additonal Approval.\nIf you want to save the Print Options ONLY, use 'Save Print Options'.");
						if(!conf) {
							return false;
						}
					}
				}

				disableDraftButtonsInActionBar();
				window.draftFrame.saveDraftFromActionBar();
				
				return false;
			}

			function approveDraftFromActionBar() {

				var $draftFrm = window.draftFrame.document.draftFrm;
				var statusOfDraft = window.draftFrame.document.draftFrm.statusOfDraft.value;
				if (statusOfDraft == 'NOT_APPROVED' || statusOfDraft == '') {
					window.draftFrame.disableButtons();
					window.draftFrame.approveDraftFromActionBar();
					var draftNo = window.draftFrame.getDraftNo();
					removeDraftListingInActionbar(draftNo);
				}

				disableDraftButtonsInActionBar();
				enableDraftSaveAction();
				return false;
			}
			
			function removeDraftListingInActionbar(draftNo) {
				if (draftNo != null && draftNo != '') {
					$('#' + draftNo).remove();
					if (window.opener && window.opener.refreshData) {
						window.opener.refreshData();
					}
				}
			}
			function viewDraftPreview() {
				if (document.viewPreviewFromActionbar) {
					viewPreviewFromActionbar();
				} else {
					window.draftFrame.viewPreviewFromActionbar();
				}
			}

			function createDocFromActionBar() {
				//conf = confirm("Please confirm the format of PDF through 'Preview'. Format/Content change of PDF after document creation is not allowed. Do you want to continue?");
				//from here by khader 
						
				var $confirmDocumentCreation = $("#confirmDocumentCreation").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:255,
					width:380,
					modal: true,
					title: 'Confirm Document Creation',
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});
			
				$confirmDocumentCreation.dialog('option', 'buttons', 
				{ 	
					'Ok': function() {
						if(document.getElementById('isStockFileCheckbox').checked == true) {
							window.draftFrame.document.getElementById('isStockFile').checked = true;
						}
						else {
							window.draftFrame.document.getElementById('isStockFile').checked = false;
						}
						window.draftFrame.createDocFromActionBar();
						$('a[name^="createDocFromActionBar"]').css("color","#AAAAAA");
						$('a[name^="createDocFromActionBar"]').removeAttr("onclick");
						$confirmDocumentCreation.dialog('close');
						disableDraftButtonsInActionBar();
				 	},
				 	'Cancel': function() {
				 		
						$confirmDocumentCreation.dialog('close');
					}
				});
				document.getElementById('isStockFileCheckbox').checked = false;
				$confirmDocumentCreation.dialog('open');	
				
			}
			
			function disableDraftButtonsInActionBar() {
				disableDraftApproveAction();
				disableDraftPreviewAction();
				disableDraftSaveAction();
				disableDocCreateAction();
			}
			
			
			function enableDraftSaveAction() {
				$("#draftSaveBtnFromActionBar").show();
			}

			function disableDraftSaveAction() {
				$("#draftSaveBtnFromActionBar").hide();
			}

			function enableDraftPreviewAction() {
				$("#draftPreviewBtnFromActionBar").show();
			}

			function disableDraftPreviewAction() {
				$("#draftPreviewBtnFromActionBar").hide();
			}

			function enableDraftApproveAction() {
				$("#draftApproveBtnFromActionBar").show();
			}

			function disableDraftApproveAction() {
				$("#draftApproveBtnFromActionBar").hide();
			}

			function enableDocCreateAction() {
				$("#draftCreateDocBtnFromActionBar").show();
			}

			function disableDocCreateAction() {
				$("#draftCreateDocBtnFromActionBar").hide();
			}

			function disableSaveNoteAction() {
				$("#saveSimpleNoteFromActionBar").hide();
				$("#saveNoteFromActionBar").hide();
			}

			function disableBookmarkAction() {
				$("#createBookmarkFromActionBar").hide();
			}
			
			function shareFile(){
				$("#shareFile").remove();
				var $fileShareDialog = $("<div id='shareFile' style='padding:5px 5px 5px 5px;'></div>").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:500,
					width:900,
					modal: true,
					title: 'Share File',
					close: function close() {						
						$("#shareFile").dialog("destroy").remove();
					},
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});
				$fileShareDialog.dialog('option', 'buttons', {
			 		'Share':function(){
				 			CKEDITOR.instances['shareComment'].updateElement();			 			
							jQuery('#selectedSeats').each(function () {
					            jQuery('#selectedSeats option').attr("selected", "selected");
					        });
							
							var action = $("#action").val();
							if(action == 'SEAT'){
								validateSharedFile();
							}else if(action == 'EMAIL'){
								if ($("#isPublicShare").is(':checked')) {
									var sharedPassword = $("#sharedPassword").val();
									if(typeof sharedPassword === "undefined" ||null == sharedPassword || "" == sharedPassword){
										displayCommonAlertDialog("Please enter valid Protected Password.");
									}else if(sharedPassword.match(/([a-z])/) && sharedPassword.match(/([A-Z])/) && (sharedPassword.match(/([0-9])/) || sharedPassword.match(/([!,%,&,@,#,$,^,*,?,_,~])/)) && sharedPassword.length >= 6)  
									{
										fileShareToEmail();
										
									}else{
										displayCommonAlertDialog("Your password must be atleast 6 characters.It must contain one upper and  lower case letters, and at least one number or symbol.");
									}
								}else{
									fileShareToEmail();
								}
								
							}
				 		
					
			 		 },
			 		 'Close': function() {
						// $fileShareDialog.dialog('close').dialog('destroy');
						$fileShareDialog.dialog('close');
						 $("#shareFile").remove();
					 }
					 
				});
				$("#shareFile").load("/ddfs/files/shareFile.do?action=SEAT&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6");
				$fileShareDialog.dialog('open');
				CKEDITOR.on('instanceReady', function() { $fileShareDialog.scrollTop(0); });
				return false;
			}
			function validateSharedFile(){
				var groupOrDepartmentSelector = $("#groupOrDepartmentSelector").val();
				if( "0" == groupOrDepartmentSelector){
					if(null == jQuery('#selectedSeats').val()){
						displayCommonAlertDialog("Please select a seat.");
					}else{
						fileShareToSeat();
					}
					
				}else if( "0" != groupOrDepartmentSelector){
					var selected = "";
					var selectedText = $("#groupOrDepartmentSelector option:selected").text();
					selected = $("#"+groupOrDepartmentSelector+"Selector").val();
					if(selected == ""){
						displayCommonAlertDialog("Please select a "+selectedText+".");
						
					}else if($("#shareFile").find($("#specificField")).is(':checked')) {
						if(null == jQuery('#selectedSeats').val()){
							displayCommonAlertDialog("Please select a seat.");
						}else{
							fileShareToSeat();
						}
					}else{
						fileShareToSeat();
					}
					
					
				}
			}
			function fileShareToSeat(){
				$.post("/ddfs/files/shareFile.do?action=SEAT&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&submitType=save",$("#shareFile form[name='sharedFileForm']").serialize(),function(data){
						if("success" == data){
							$("#shareFile").dialog('close');
							fileShareToSeatDialog("Document shared with the recipients.");
						}else if("noSeats" == data){
							displayCommonAlertDialog("Please select a seat");
						}else if("error" == data){
							displayCommonAlertDialog("Currently unable to process your request. Please contact administrator");
						}else if("nogroup" == data){
							displayCommonAlertDialog("Please select "+$('#groupOrDepartmentSelector option:selected').text());
						} else{
							if(null != data && data.startsWith('ERROR')){
								var errorMessage =  data.split(":");
								if(null != errorMessage[1]){
									displayCommonAlertDialog(errorMessage[1]);
									$("#shareFile").dialog('close');
									location.reload();
								}
							}else{
								displayCommonAlertDialog(data);
							}
							
						}
				});
				
			}
			
			function fileShareToSeatDialog($var){
				var $confirmationDialog = $('<div id=\"alertDialog\"><p style="margin:10px;text-align:left">' + $var + '</p></div>').dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height : 'auto',
					width:400,
					modal: true,
					title: 'Alert',
					buttons: {
	 					Ok: function() {	 						
	 						try {
	 							window.opener.refreshData(); 
	 						} catch(err) {}
	 						location.reload();
	 						$("#shareFile").remove();
	 						$(this).dialog('close');
	 					}					
	 				}
	 			});
	 			$confirmationDialog.dialog("open");
			}
			
			function fileShareToEmail(){
				var emailId = $("#emailId").val();
				if(typeof emailId === "undefined" ||null == emailId || "" == emailId){
					displayCommonAlertDialog("Please enter valid Email ID.");
				}else {
					$(".ui-dialog-buttonpane button:contains('Share')").attr("disabled", true).addClass("ui-state-disabled");
					$.post("/ddfs/files/shareFile.do?action=EMAIL&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&submitType=save",$("#shareFile form[name='sharedFileForm']").serialize(),function(data){
							if("success" == data){
								displayCommonAlertDialog("Document shared with the recipients.");
								$("#shareFile").dialog('close');
								try {
									window.opener.refreshData(); 
								} catch(err) {}
								location.reload();
								$("#shareFile").remove();
							}else if(null != data && data.startsWith('EMAILERROR')){
								$(".ui-dialog-buttonpane button:contains('Share')").attr("disabled", false).removeClass("ui-state-disabled");
								var errorMessage =  data.split(":");
								if(null != errorMessage[1]){
									emailShareConfirmation(errorMessage[1]);
								}
							}
					});
				}
			///}
			}
			function returnSharedFile(){
				
				for ( instance in CKEDITOR.instances ) {
		            CKEDITOR.instances[instance].updateElement();	
				}	
				var $unsavedNote = '';
				try {
					if(document.noteEditorForm) {
						
						$unsavedNote = $('#usernoteeditor').val();
					} else if (top.notesFrame && top.notesFrame.document && top.notesFrame.document.noteEditorForm) {
						$unsavedNote = document.getElementById("notesFrame").contentWindow.getHtmlNote();
					} 
				} catch(e) {
					if (top.notesFrame && top.notesFrame.document && top.notesFrame.document.noteEditorForm) {
						$unsavedNote = document.getElementById("notesFrame").contentWindow.getPlainTextNote();
					} 
				}
				$("#returnSharedDialog").dialog({
					width : 400,
					height : 200,
					modal : true,
					resizable: false,
					title : 'Return Shared File',
					'buttons': {
						'Return': function() {
							var viewableToAll = $('[name^=viewableToAll]').is(':checked');
							$.post("/ddfs/files/file.do?fileAction=returnSharedFile&sharedFileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&viewableToAll=" + viewableToAll ,{"unSubmittedNote" : $unsavedNote,"fckEditorTRacker":"unSubmittedNote"}, function(response){
								$("#returnSharedDialog").dialog('close');
								if (response != null && response != '') {
									$("#layout").html(response);
								} else {
									if (window.opener && window.opener.refreshData) {
		                                 if(!window.opener.closed){
		                                     window.opener.refreshData();
		                                     window.close();
		                                 }
		                             }
									var session = '';
									if('EMAIL' == session ){
										window.location.href= "/ddfs/files/fileReturnedSuccess.do?";
									}
								}
								
							});
							
						},
						'Cancel' : function(){
							$(this).dialog('close');
						}
					}
				});
			}
			$("#confirmDocumentCreation").find($("#isStockFileCheckbox")).click(function(){
				var isChecked = $('#isStockFileCheckbox').attr('checked')?true:false;
				if(isChecked){
					$('#publicStockFileSpan').show();
				}else{
					$('#publicStockFileSpan').hide();
				}
				});
			function emailShareConfirmation(emailIds){
				var $confirmationDialog = $("<div><label>The following email ids are not linked with DDFS.</label><br><b>"+emailIds+"</b><br> Are you sure, you want to share this document?</div>").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:250,
					width:320,
					modal: true,
					zIndex: 1000,
					title: "Confirm to share document",
	 				buttons: {
	 					Ok: function() {
	 						$(".ui-dialog-buttonpane button:contains('Share')").attr("disabled", true).addClass("ui-state-disabled");
	 						$.post("/ddfs/files/shareFile.do?action=EMAIL&conform=OK&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6&submitType=save",$("#shareFile form[name='sharedFileForm']").serialize(),function(data){
	 								if("success" == data){
	 									displayCommonAlertDialog("Document shared with the recipients.");
	 									$("#shareFile").dialog('close');
	 									try {
	 										window.opener.refreshData(); 
	 									} catch(err) {}
	 									location.reload();
	 									$("#shareFile").remove();
	 								}
	 						});
	 					},
	 					Cancel:function() {
	 						$(this).dialog("close");
	 						
	 					}
	 						
	 				}
	 			});
	 			$confirmationDialog.dialog("open");
			}
		</script>

		<input type="hidden"  id="info_username" value="deepak C"/>
		<input type="hidden" id="info_seatname" value="HORTICULTURIST"/>
		<span class="helper-icon"></span>

		<div id="sessionTimedOutDialog" title="Re-Login" style="display:none" >
			<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
			You session is not valid. Please re-login.</p>
		</div>

		<div id="confirmActionDialog" title="Confirmation" style="display:none">
			<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
			Do you wish to proceed?</p>
		</div>

		<div id="viewExportablesDialog" title="Export File" style="display:none"></div>
		<div id="sharedFileSeatsDialogDiv" style="display:none"></div>
		<div  id="popup_box" style="display: none;"></div>
				<div id="chitDialog" style="display:none;">
	 			<a  id="closeBtn" value="Close" onclick="dialogClose();">X</a>
	<div class="chit-dialog-inner">
		
	 </div>
	<!--  <input type="button" id="closeBtn" value="Close" onclick="dialogClose();" class="form-button float-right"/> -->
</div>
		
	<script>
	
function showChitDialog() { 
	
	// $("#chitDialog").remove();
	var $addRefDialog = $("#chitDialog").dialog({
		autoOpen: false,
		bgiframe: true,
		resizable: false,
		height:'auto',
		width:500,
		modal: true,
		//position: 'center'
		
	
	});

	$(".ui-dialog-titlebar").hide();
	$addRefDialog.dialog('open');
	return false;
}
function dialogClose(){
	 $("#chitDialog").remove();
}
	var values, index;

			function loadView(urlToLoad) {
					window.location = urlToLoad;
			}

			function viewExportables() {
				var width = 850;
				var height = 500;
				
				var $viewExportablesDialog = $("#viewExportablesDialog").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:height,
					width:width,
					modal: true,
					title: 'Export File',
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});

				var startTime = 0.0;
				var endTime = 24.0;
				
				var time = 11 + "." + 35;
				if(startTime <= time && endTime >= time) {
					$viewExportablesDialog.dialog('option', 'buttons',
						{
						 'Export File As ZIP': function() {
							$("#fileType").val("zip");
							if($("#curFileDivId :checked").size() > 0 || $('#note').is(':checked')|| $('#noteWithAttacment').is(':checked')|| $('#exportScratchpad').is(':checked') || $('#exportUnsubmittedNote').is(':checked')  || $('#referenceFileListing').is(':checked')) {
								//newwin = window.open('','4aa7ffa7-f153-4847-8bb2-bdd8107adae6','menubar=no,toolbar=no,scrollbars=1,location=no');
								//newwin.focus();
								document.forms['fileExportForm'].submit();
								$viewExportablesDialog.dialog('close');
							}
							else {
								displayCommonMessageDialog("Please Select Current File or Note File.");
							}
						 },
						 'Export File As PDF': function() {
							 
								 var notesFrom = $("#viewExportablesDialog").find($("#noteNoFrom")).val();
								 var notesTo = $("#viewExportablesDialog").find($("#noteNoTo")).val();
								 var notesFromNumber = isNumberCheck(notesFrom);
								 var notesToNumber = isNumberCheck(notesTo);
								 if(notesFrom != '' && notesTo != '') {									 
									 if(!notesFromNumber && !notesToNumber) {
										 displayCommonMessageDialog("Please enter valid note from and notes to values.");
										 return false;
									 }
								 } else if(notesFrom != '' || notesTo != '') {
									 if(notesFrom != '') {
										 if(!notesFromNumber) {
											 displayCommonMessageDialog("Please enter valid note from value.");
											 return false;
										 }										 
									 } else {
										 if(!notesToNumber) {
											 displayCommonMessageDialog("Please enter valid note to value.");
											 return false;
										 }
									}
								}
							
							$("#fileType").val("pdf");
							if($("#curFileDivId :checked").size() > 0 || $('#note').is(':checked')|| $('#noteWithAttacment').is(':checked')|| $('#exportScratchpad').is(':checked') || $('#exportUnsubmittedNote').is(':checked')  || $('#referenceFileListing').is(':checked')) {
								//newwin = window.open('','4aa7ffa7-f153-4847-8bb2-bdd8107adae6','menubar=no,toolbar=no,scrollbars=1,location=no');
								//newwin.focus();
								document.forms['fileExportForm'].submit();
								$viewExportablesDialog.dialog('close');
							}
							else {
								displayCommonMessageDialog("Please Select Current File or Note File.");
							}
						 },
						 'Close': function() {
							$viewExportablesDialog.dialog('close');
							$("#viewExportablesDialog").html("");
						 }
					});
				} else {
					$viewExportablesDialog.dialog('option', 'buttons',
						{
						 'Export File As ZIP': function() {
							$("#fileType").val("zip");
							if($("#curFileDivId :checked").size() > 0 || $('#note').is(':checked')|| $('#noteWithAttacment').is(':checked')|| $('#exportScratchpad').is(':checked') || $('#exportUnsubmittedNote').is(':checked')  || $('#referenceFileListing').is(':checked')) {
								//newwin = window.open('','4aa7ffa7-f153-4847-8bb2-bdd8107adae6','menubar=no,toolbar=no,scrollbars=1,location=no');
								//newwin.focus();
								document.forms['fileExportForm'].submit();
								$viewExportablesDialog.dialog('close');
							}
							else {
								displayCommonMessageDialog("Please Select Current File or Note File.");
							}
						 },
						 'Close': function() {
							$viewExportablesDialog.dialog('close');
							$("#viewExportablesDialog").html("");
						 }
					});
				}
				
				$viewExportablesDialog.dialog('open');
				$("#viewExportablesDialog").load('../files/viewExportables.do?_decoration=false&fileNo=4aa7ffa7-f153-4847-8bb2-bdd8107adae6');
				return false;
			}
			function isNumberCheck(n) {
				return !isNaN(parseFloat(n)) && isFinite(n);
			}

			function disablePageButtons() {
			}

			function enablePageButtons() {
			}

			function forwardDialog(formName,chit,selectName) {
				//var select = $("#"+formName+" select[name='"+selectName+"'] option:selected").html();
				var selIndex = document.getElementById(selectName).selectedIndex;
				if(selIndex >= 0) {
					var select = document.getElementById(selectName).options[document.getElementById(selectName).selectedIndex].text;
					var selectedSeat = document.getElementById(selectName).value;
					if(null == selectedSeat || selectedSeat == "")
						{
						displayCommonMessageDialog("Please select a seat to proceed.");
						}
					else {
					    select=$.trim(select);
					    chitAddDialogBox(formName,chit,select);
					}
				}
			}

			function chitAddDialogBox(formName, chitContent, seatName) {
				/* if(null==seatName || seatName == "") {
					displayCommonAlertDialog("Please select a seat to proceed.");
					return;
				} */
				seatName=seatName.replace(/&amp;/g,'&');
				/* 
				if(false == confirm(confirmMsg)) {
					return false;
				} */
				var confirmMsg =  (seatName == '' || seatName == '-- Select --'?"Are you sure you want to forward this file?":"Are you sure you want to forward this file to "+seatName+"?");
				$('<div style="padding: 10px; max-width: 500px; word-wrap: break-word;">'+ confirmMsg +'</div>').dialog({
					modal : true,
					draggable: false,
		            resizable: false,
		            width: 'auto',
		            title: 'Confirm',
		            minHeight: 75,
					'buttons': {
					'Yes': function() {
						displayActionInProgressDialog();
						 try {
							$("#viewDefaultForwardDialog").dialog('close');
						} catch (e) {}
						try {
							$("#viewForwardOptionsDialog").dialog('close');
						} catch (e) {}
						setUnsavedNote();
						var chitContentInput = "chitContentInput";
						if ("fileActionForwardExpectedFrm1" == formName
								|| "fileActionForwardExpectedFrm2" == formName
								|| "fileActionForwardExpectedFrm3" == formName
								|| "fileActionForwardExpectedFrm4" == formName) {
							chitContentInput = "chitContentDefaultOptionsInput";
						} else if ("fileActionForwardToSameDeptFrm" == formName
								|| "fileActionForwardToOtherDeptFrm" == formName) {
							chitContentInput = "chitContentForwardOptionsInput";
						}
						$("#"+chitContent).val(document.getElementById(chitContentInput).value);
						$("#"+formName).submit();
						
						$(this).dialog('close');
					},'No': function() {
						$(this).dialog('close');
						return;
					}
					}	
				});
				
				return false; 
			}

			function setUnsavedNote() {
				var $unsavedNote = '';
				try {
					if(document.noteEditorForm) {
						$unsavedNote = $('#usernoteeditor').html();
					} else if (top.notesFrame && top.notesFrame.document && top.notesFrame.document.noteEditorForm) {
						$unsavedNote = document.getElementById("notesFrame").contentWindow.getHtmlNote();
					}
				} catch(e) {
					if (top.notesFrame && top.notesFrame.document && top.notesFrame.document.noteEditorForm) {
						$unsavedNote = document.getElementById("notesFrame").contentWindow.getPlainTextNote();
					}
				}				

				if (document.expSeatFrm1 && document.expSeatFrm1.unSubmittedNote) {
					document.expSeatFrm1.unSubmittedNote.value = $unsavedNote;
					addfckEditorTracker($(document.expSeatFrm1),'unSubmittedNote');

				}
				if (document.expSeatFrm2 && document.expSeatFrm2.unSubmittedNote) {
					document.expSeatFrm2.unSubmittedNote.value = $unsavedNote;
					addfckEditorTracker($(document.expSeatFrm2),'unSubmittedNote');

				}
				if (document.expSeatFrm3 && document.expSeatFrm3.unSubmittedNote) {
					document.expSeatFrm3.unSubmittedNote.value = $unsavedNote;
					addfckEditorTracker($(document.expSeatFrm3),'unSubmittedNote');

				}
				if (document.expSeatFrm4 && document.expSeatFrm4.unSubmittedNote) {
					document.expSeatFrm4.unSubmittedNote.value = $unsavedNote;
					addfckEditorTracker($(document.expSeatFrm4),'unSubmittedNote');

				}
				if (document.deptSeatFrm && document.deptSeatFrm.unSubmittedNote) {
					document.deptSeatFrm.unSubmittedNote.value = $unsavedNote;
					addfckEditorTracker($(document.deptSeatFrm),'unSubmittedNote');

				}
				if (document.otherDeptSeatFrm && document.otherDeptSeatFrm.unSubmittedNote) {
					document.otherDeptSeatFrm.unSubmittedNote.value = $unsavedNote;
					addfckEditorTracker($(document.otherDeptSeatFrm),'unSubmittedNote');

				}
			}



			function togglediv(obj) {
				var name = obj.id;
				var box = document.getElementById(name + 'Box');
				var expSeat= document.getElementById('expSeat');
				if (box) {
					var state = box.style.display;
				    if (state == 'block') {
				    	box.style.display = 'none';
				    	expSeat.style.display='block';
				    } else {
				    	box.style.display = 'block';
				    	expSeat.style.display='none';
				    }
				}
			}

			function displayReCallFileDialog($action, $frmid) {
				var $reCallFileDialog = $("#reCallFileDialog").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:180,
					modal: true,
					title: 'Pull File',
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});

				$reCallFileDialog.dialog('option', 'buttons',
						{ 	'ReCall File': function() {
								$(this).dialog('close');
								disablePage();
								$.post($action, $("form[id^='" + $frmid + "']").serialize(),
										function(data){
											JSONObject = eval( "(" + data + ")" );
								            if (JSONObject.ERROR != 'true' && window.opener) {
								            	window.opener.refreshData();
								            	$('#fileActionTakeContainer').hide();
								            	return displayFileTakenDialog();
								            } else if (JSONObject.ERROR == 'true') {
								            	openPopUpWindow(JSONObject.MSG);
								            }
											return false;
										});
							 },
							 'Cancel': function() {
								$(this).dialog('close');
								return false;
							 }
						});
				$reCallFileDialog.dialog('open');
				return false;
			}

			function displayTakeFileDialog($action, $frmid) {

				var $takeFileDialog = $("#takeFileDialog").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:320,
					width:400,
					modal: true,
					title: 'Pull File',
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});

				$takeFileDialog.dialog('option', 'buttons',
						{ 	'Pull File': function() {
								var commentStr = $.trim($("#pullFileComment").val());
								if(commentStr.length == 0|| null == commentStr || "" == commentStr){
									displayCommonMessageDialog("Please enter a reason for pulling this file");
									return false;
								}else{
									$('#pullbackComment').val($('#pullFileComment').val());
									$(this).dialog('close');
									disablePage();
									$.post($action, $("form[id^='" + $frmid + "']").serialize(),
											function(data){
												JSONObject = eval( "(" + data + ")" );
									            if (JSONObject.ERROR != 'true' && window.opener) {
									            	window.opener.refreshData();
									            	$('#fileActionTakeContainer').hide();
									            	return displayFileTakenDialog();
									            } else if (JSONObject.ERROR == 'true') {
									            	openPopUpWindow(JSONObject.MSG);
									            }
												return false;
											});
								}
							 },
							 'Cancel': function() {
								$(this).dialog('close');
								return false;
							 }
						});
				$takeFileDialog.dialog('open');
				return false;
			}

			function displayFileTakenDialog() {

				var $fileTakenDialog = $("#fileTakenDialog").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:180,
					modal: true,
					overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});
				$('#fileTakenDialog').dialog('option', 'buttons',
						{ 	'OK': function() {
								var $win=window.open("","_self");
								$win.close();
							 }
						});
				$("#fileTakenDialog").dialog('open');
			}
			function showFileTags() {
				$("#fileTagDialogDiv").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: true,
					height:250,
					width:600,
					modal: true,
					title: 'File Tags',
					 overlay: {
						backgroundColor: '#000',
						opacity: 0.5
					}
				});

				$("#fileTagDialogDiv").dialog('option', 'buttons',
						{
					 	'Close': function() {
					 			 $("#fileTagDialogDiv").dialog('close');
					 	}
					});
				$("#fileTagDialogDiv").dialog('open');
			}
			function showFileRemark(fileNo){

				 $("#FileRemarkDiv").remove();
					var $fileRemarkDialog = $("<div id='FileRemarkDiv' style='padding:5px 5px 5px 5px;'></div>").dialog({
						autoOpen: false,
						bgiframe: true,
						resizable: false,
						height:300,
						width:530,
						modal: true,
						title: 'My Remark',
						overlay: {
							backgroundColor: '#000',
							opacity: 0.5
						}
					});


					$fileRemarkDialog.dialog('option', 'buttons',
								{
							 		'Save':function(){
							 			var remarksSave = $.trim($("#remarks").val());
							 			if(remarksSave.length == 0|| null == remarksSave || "" == remarksSave){
											displayCommonMessageDialog("Enter File Remark");
											return false;
										}
										$.post("/ddfs/files/addFileRemarks.do",$("#FileRemarkDiv form[name='remarkForm']").serialize(),function(){
											displayCommonMessageDialog('Your Remark have been Saved.');
											
											try {
												window.opener.refreshData();
											} catch(err) {}
										});
										$fileRemarkDialog.dialog('destroy').remove();
							 		 },
							 		 'Close': function() {
							 			$fileRemarkDialog.dialog('destroy').remove();
									 }
						});
					$("#FileRemarkDiv").load("/ddfs/files/addFileRemarks.do?fileNo="+fileNo);
					$fileRemarkDialog.dialog('open');
// 					if(remarksStr.length == 0|| null == remarksStr || "" == remarksStr){
// 						$('.ui-button:contains(Delete My Remarks)').hide();
// 					}
					return false;
			}

			function markAsConfidential(fileNo,confidentialFile,shared){
				$("#Confidential").remove();
				if(shared == "true" && confidentialFile != "true"){
					displayCommonMessageDialog("File is Shared, Please remove sharing before make it confidential. [ click tab 'view shared seats' to remove sharing. ]");
					return false;
				}
				var $fileConfidentialDialog = $("<div id='Confidential' style='padding:5px 5px 5px 5px;'></div>").dialog({
						autoOpen: false,
						bgiframe: true,
						resizable: false,
						height:450,
						width:750,
						modal: true,
						title: 'Manage Confidentiality',
						overlay: {
							backgroundColor: '#000',
							opacity: 0.5
						}
					});
					if(confidentialFile == "true"){
						$fileConfidentialDialog.dialog('option', 'buttons',
							{
								'Update':function(){
									jQuery('#selectedSeats').each(function () {
							            jQuery('#selectedSeats option').attr("selected", "selected");
							        });
									if(null == jQuery('#selectedSeats').val()){
										$('#confMessage').css("display","inline");
										jQuery('#confMessage').html("Please select a seat");
										return false;
									}
									$.post("/ddfs/files/markAsConfidential.do?submitType=save",$("#Confidential form[name='confidentialForm']").serialize(),function(data){
										if("noSeats" == data){
											$('#confMessage').css("display","inline");
											jQuery('#confMessage').html("Please select a seat");
										}else if("success" == data){
											//$fileConfidentialDialog.dialog('close').dialog('destroy');
											try {
												window.opener.refreshData();
											} catch(err) {}
											location.reload();
											$("#Confidential").remove();
										}else{
											$('#confMessage').css("display","inline");
											jQuery('#confMessage').html(data);
										}
									});
						 		 },
						 		 'Non-Confidential': function() {
										$.post("/ddfs/files/markAsConfidential.do?submitType=remove",$("#Confidential form[name='confidentialForm']").serialize(),function(){
											//$fileConfidentialDialog.dialog('close').dialog('destroy');
											try {
												window.opener.refreshData();
											} catch(err) {}
											location.reload();
										});
										$("#Confidential").remove();
									 },
						 		 'Close': function() {
									 $fileConfidentialDialog.dialog('close').dialog('destroy');
									 $("#Confidential").remove();
								 }
							});
					 }else{
						$fileConfidentialDialog.dialog('option', 'buttons',
						{
								'Save':function(){
									jQuery('#selectedSeats').each(function () {
							            jQuery('#selectedSeats option').attr("selected", "selected");
							        });
									if(null == jQuery('#selectedSeats').val()){
										$('#confMessage').css("display","inline");
										jQuery('#confMessage').html("Please select a seat");
										return false;
									}
									$.post("/ddfs/files/markAsConfidential.do?submitType=save",$("#Confidential form[name='confidentialForm']").serialize(),function(data){
										if("noSeats" == data){
											$('#confMessage').css("display","inline");
											jQuery('#confMessage').html("Please select a seat");
											return false;
										}else{
											$fileConfidentialDialog.dialog('close').dialog('destroy');
											try {
												window.opener.refreshData();
											} catch(err) {}
											location.reload();
											$("#Confidential").remove();
										}
									});
						 		 },
					 		 'Close': function() {
								 $fileConfidentialDialog.dialog('close').dialog('destroy');
								 $("#Confidential").remove();
							 }

						});
					 }
					$("#Confidential").load("/ddfs/files/markAsConfidential.do?fileNo="+fileNo+"&confidential="+confidentialFile);
					$fileConfidentialDialog.dialog('open');
					return false;
			}

			/******************* File Attachment update functions - Start ***********/
			function openFiledialog(id,docType){
				var fileNo=$("#fileNo").val();
				var categoryId=$("#categoryId").val();
				var attachmentOptions = {
						url:"/ddfs/files/fileUpload.do?action=upload&excludeBookmark=false&tempOperation=false&fileNo="+fileNo+"&formId="+formId+"&attachmentId="+id+"&documentType="+docType,
						beforeSubmit: function(formdata, form, options){
							
                        var customVersion = $('#attachUpdateForm').find($("#customVersion")).val();
                        if (customVersion != null && customVersion !='') {
                        	if ((customVersion.match(RegExp("\\.",'g') ) ) != null) {
                        	var matchesCount =  (customVersion.match(RegExp("\\.",'g') ) ).length;
                        	if (matchesCount >1) {
                        		displayCommonMessageDialog("please enter a correct value for custom version");
                        		$(".ui-dialog-buttonpane button:contains('Save')").button("enable");
								$(".ui-dialog-buttonpane button:contains('Cancel')").button("enable");
                        		return false;
                        	} 
                          }
                        	var letters = /^[A-Za-z]+$/;  
                            if(customVersion.match(letters))  
                            {  
                            	displayCommonMessageDialog("Please enter numeric characters or [.]"); 
                            	$(".ui-dialog-buttonpane button:contains('Save')").button("enable");
								$(".ui-dialog-buttonpane button:contains('Cancel')").button("enable");
                            	return false;  
                            }
                        }

						},
						success:  function(response){
							//updateFileAttribute(fileNo,categoryId);
							try{
								response = $.parseJSON(response);
								$(".ui-dialog-buttonpane button:contains('Save')").button("enable");
								$(".ui-dialog-buttonpane button:contains('Cancel')").button("enable");
								displayCommonMessageDialog(response.ERROR_MSG);
							}catch(err){
								$("#updateDiv").dialog("destroy").remove();
								location.reload();
							}
							/* alert(response);
							if (response.ERROR) {
								displayCommonMessageDialog(response.ERROR_MSG);
								$(".ui-dialog-buttonpane button:contains('Save')").button("enable");
								$(".ui-dialog-buttonpane button:contains('Cancel')").button("enable");
							} else {
								$("#updateDiv").dialog("destroy").remove();
								location.reload();
							} */
							return false;
						},
						error:function(jqXHR, textStatus, errorThrown){

							 alert("error=="+errorThrown);
						}
				};
				var url="/ddfs/files/attachmentUpdate.do?_decoration=false&fileNo="+fileNo+"&categoryId="+categoryId+"&attachmentId="+id+"&docType="+docType;
				var $updateDialog = $("<div id='updateDiv'></div>").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:330,
					width:500,
					modal: true,
					zIndex: 1000,
					title: "Update attachment",
					close: function(){
						$updateDialog.dialog("destroy").remove();
				    },
					buttons: {
						Save: function(){

									var $file = $(':input[id^="attachmentFile"]',$("#attachmentDialog")).val();
								     if ($file == '') {
										alert('Enter valid file');
										return false;
									} else {

									$('#attachUpdateForm').ajaxSubmit(attachmentOptions);
									$(".ui-dialog-buttonpane button:contains('Save')").button("disable");
									$(".ui-dialog-buttonpane button:contains('Cancel')").button("disable");
//											return false;

										/* $.ajax({
											type: "POST",
											dataType: 'json',
											url:"/ddfs/files/fileUpload.do?action=upload&excludeBookmark=false&tempOperation=false&fileNo="+fileNo+"&formId="+formId+"&attachmentId="+id+"&documentType="+docType,
											success:  function(response){
												alert("h");
												updateFileAttribute(fileNo,categoryId);

											}
										}); */
									}

							//myVault.setURL("/ddfs/files/fileUpload.do?action=upload&excludeBookmark=false&tempOperation=false&fileNo="+fileNo+"&formId="+formId+"&attachmentId="+id+"&documentType=MainDocument");



						},
						Cancel: function(){
							$updateDialog.dialog("destroy").remove();

						}
					}
				}).load(url,function(){
					$updateDialog.dialog("open");
				})
				/* myVault.setURL("/ddfs/files/fileUpload.do?action=upload&excludeBookmark=false&tempOperation=false&fileNo="+fileNo+"&formId="+formId+"&attachmentId="+id+"&documentType=MainDocument");
				$(".dhx_vault_button").trigger('click'); */
			}

			function openVersionDialog(attachmentId){
				var fileNo=$("#fileNo").val();
				var url="/ddfs/files/attachmentVersions.do?_decoration=false&attachmentId="+attachmentId+"&fileNo="+fileNo;
				var $versionDialog = $("<div id='versionsDiv'></div>").dialog({
					autoOpen: false,
					bgiframe: true,
					resizable: false,
					height:460,
					width:900,
					modal: true,
					zIndex: 1000,
					title: "Attachment versions",
					close: function(){
						$versionDialog.dialog("destroy").remove();
				    },
					buttons: {
						Cancel: function(){
							$versionDialog.dialog("destroy").remove();

						}
					}
				}).load(url,function(){
					$versionDialog.dialog("open");
				})
			}
			function updateFileAttribute(fileNo,categoryId) {
				$.post('/ddfs/files/attributes.do?_decoration=false&fileNo='+fileNo+"&categoryId="+categoryId, $("#categoryUpdateForm").serialize(),
							function(data){
								openPopUpWindow('<div style="text-align:left">' + data + '</div>');
								return false;
							});

				$("#updateDiv").dialog("destroy").remove();
				location.reload();
				return false;

			}
			/******************* File Attachment update functions - End ***********/
function workingCopy(attachmentId){
	var fileNo=$("#fileNo").val();
	var categoryId=$("#categoryId").val();
	var url="/ddfs/files/workingCopy.do?_decoration=false&fileNo="+fileNo+"&categoryId="+categoryId+"&attachmentId="+attachmentId;
	var attachmentOptions = {
			url:"/ddfs/files/fileUpload.do?action=upload&excludeBookmark=false&tempOperation=false",
			beforeSubmit: function(formdata, form, options){
			},
			success:  function(response){
				$('#ajaxLoader').css('display','none');
				$("#workingCopyAttachmentDialog").dialog('destroy').remove();
				location.reload();
			}
	};
	var $attachmentDialog = $("<div id='workingCopyAttachmentDialog'></div>").dialog({
		autoOpen: false,
		bgiframe: true,
		resizable: false,
		height:200,
		width:500,
		modal: true,
		title: 'Upload working copy',
		close: function(){
			$attachmentDialog.dialog("destroy").remove();
	    },
		buttons: {
			Attach:function(){

				var $file = $(':input[id^="attachmentFile"]',$("#attachmentDialog")).val();
			     if ($file == '') {
					alert('Enter valid file');
					return false;
				} else {

					$(".ui-dialog-buttonset .ui-button").attr("disabled","disabled");
					$('#ajaxLoader').css('display','block');
					$('#workingCopyForm').ajaxSubmit(attachmentOptions);
					return false;
				}

			},
			Cancel: function(){
				$attachmentDialog.dialog('destroy').remove();
	           return false;
			}
		}
	}).load(url,function(){
		$attachmentDialog.dialog('open');
	});

}
function viewWorkingCopy(id){
	$("#workingCopy"+id).toggle();

}

function showHideAttachmentDetails(){
	if ($("#isBookMarkItem").is(':checked')){
		$("#attachmentDetails").hide();
	} else if ($("#attachmentDiv").is(':checked')){
		$("#attachmentDetails").show();
	}

}
		</script>

	</body>
</html>

